(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,84103,e=>{"use strict";var t=e.i(33842);e.i(1465);var r=e.i(34991);let i=e=>`restaurant-system/${e}/${t.RESTAURANT_ID}`,a=async e=>{let a=Object.entries((await (0,r.get)((0,r.ref)(t.database,i("orders")))).val()||{}).map(([e,t])=>({id:e,...t}));return a.sort((e,t)=>{let r=e.timestamp||new Date(e.createdAt).getTime();return(t.timestamp||new Date(t.createdAt).getTime())-r}),e&&e>0&&(a=a.slice(0,e)),a},s=async(e,a)=>{let s=(await (0,r.get)((0,r.ref)(t.database,i("orders")))).val()||{},o=e.start.getTime(),n=e.end.getTime(),l=Object.entries(s).map(([e,t])=>({id:e,...t})).filter(e=>{let t=e.timestamp||new Date(e.createdAt).getTime();return t>=o&&t<=n}).sort((e,t)=>{let r=e.timestamp||new Date(e.createdAt).getTime();return(t.timestamp||new Date(t.createdAt).getTime())-r});return a&&a>0&&(l=l.slice(0,a)),l},o=async e=>{let a=await (0,r.get)((0,r.ref)(t.database,`${i("orders")}/${e}`));return a.exists()?{id:e,...a.val()}:null},n=async(e,a)=>{await (0,r.update)((0,r.ref)(t.database,`${i("orders")}/${e}`),{status:a,updatedAt:new Date().toISOString()})},l=async e=>{let a=(0,r.push)((0,r.ref)(t.database,i("orders"))),s=e.items.map(e=>{let t={id:e.id,name:e.name,price:e.price||0,quantity:e.quantity,itemTotal:e.itemTotal||e.price*e.quantity};return e.emoji&&(t.emoji=e.emoji),e.note&&(t.note=e.note),t}),o={items:s,total:e.total||0,status:e.status||"pending",restaurantId:t.RESTAURANT_ID,createdAt:new Date().toISOString(),timestamp:Date.now(),itemsCount:s.reduce((e,t)=>e+t.quantity,0)};void 0!==e.subtotal&&(o.subtotal=e.subtotal),e.discount&&(o.discount=e.discount),e.paymentMethod&&(o.paymentMethod=e.paymentMethod),e.paymentStatus&&(o.paymentStatus=e.paymentStatus),e.customerName&&(o.customerName=e.customerName),e.tableNumber&&(o.tableNumber=e.tableNumber),e.tableId&&(o.tableId=e.tableId),e.roomId&&(o.roomId=e.roomId),e.roomNumber&&(o.roomNumber=e.roomNumber),e.orderType&&(o.orderType=e.orderType),e.workerId&&(o.workerId=e.workerId),e.workerName&&(o.workerName=e.workerName),e.source&&(o.source=e.source);let n=null;if(e.tableNumber&&!e.tableId){let t=await R(e.tableNumber);t&&(n=t.id,o.tableId=t.id,o.orderType="table")}else e.tableId&&(n=e.tableId);await (0,r.set)(a,o);let l=a.key;if(n)try{await T(n,"occupied",l)}catch(e){console.error("Failed to update table status:",e)}return l},d=async()=>Object.entries((await (0,r.get)((0,r.ref)(t.database,i("menu")))).val()||{}).map(([e,t])=>{let r={id:e,...t,price:"string"==typeof t.price?parseFloat(t.price)||0:t.price||0,basePrice:t.basePrice?"string"==typeof t.basePrice?parseFloat(t.basePrice):t.basePrice:void 0};if(r.variations&&Array.isArray(r.variations)&&(r.variations=r.variations.map(e=>({...e,price:"string"==typeof e.price?parseFloat(e.price)||0:e.price||0}))),r.sizes&&"object"==typeof r.sizes){let e={};Object.entries(r.sizes).forEach(([t,r])=>{e[t]={...r,price:"string"==typeof r.price?parseFloat(r.price)||0:r.price||0}}),r.sizes=e}if(r.shishaTypes&&"object"==typeof r.shishaTypes){let e={};Object.entries(r.shishaTypes).forEach(([t,r])=>{e[t]={...r,price:"string"==typeof r.price?parseFloat(r.price)||0:r.price||0}}),r.shishaTypes=e}return r}),c=async e=>{let a=(0,r.push)((0,r.ref)(t.database,i("menu"))),s={};return Object.entries(e).forEach(([e,t])=>{if(void 0!==t)if("price"===e||"basePrice"===e)s[e]="string"==typeof t?parseFloat(t)||0:t||0;else if("variations"===e&&Array.isArray(t))s[e]=t.map(e=>({...e,price:"string"==typeof e.price?parseFloat(e.price)||0:e.price||0}));else if("sizes"===e&&"object"==typeof t){let r={};Object.entries(t).forEach(([e,t])=>{r[e]={...t,price:"string"==typeof t.price?parseFloat(t.price)||0:t.price||0}}),s[e]=r}else if("shishaTypes"===e&&"object"==typeof t){let r={};Object.entries(t).forEach(([e,t])=>{r[e]={...t,price:"string"==typeof t.price?parseFloat(t.price)||0:t.price||0}}),s[e]=r}else s[e]=t}),await (0,r.set)(a,{...s,category:e.categoryId||e.category,categoryId:e.categoryId||e.category,active:e.isActive??e.active??!0,isActive:e.isActive??e.active??!0,createdAt:new Date().toISOString()}),a.key},p=async(e,a)=>{let s={updatedAt:new Date().toISOString()};Object.entries(a).forEach(([e,t])=>{if(void 0!==t)if("price"===e||"basePrice"===e)s[e]="string"==typeof t?parseFloat(t)||0:t||0;else if("variations"===e&&Array.isArray(t))s[e]=t.map(e=>({...e,price:"string"==typeof e.price?parseFloat(e.price)||0:e.price||0}));else if("sizes"===e&&"object"==typeof t){let r={};Object.entries(t).forEach(([e,t])=>{r[e]={...t,price:"string"==typeof t.price?parseFloat(t.price)||0:t.price||0}}),s[e]=r}else if("shishaTypes"===e&&"object"==typeof t){let r={};Object.entries(t).forEach(([e,t])=>{r[e]={...t,price:"string"==typeof t.price?parseFloat(t.price)||0:t.price||0}}),s[e]=r}else s[e]=t}),a.categoryId&&(s.category=a.categoryId),void 0!==a.isActive&&(s.active=a.isActive),await (0,r.update)((0,r.ref)(t.database,`${i("menu")}/${e}`),s)},f=async e=>{await (0,r.remove)((0,r.ref)(t.database,`${i("menu")}/${e}`))},u=async()=>Object.entries((await (0,r.get)((0,r.ref)(t.database,i("categories")))).val()||{}).map(([e,t])=>({id:e,...t})).sort((e,t)=>(e.order||e.sortOrder||0)-(t.order||t.sortOrder||0)),x=async e=>{let a=(0,r.push)((0,r.ref)(t.database,i("categories"))),s={};return Object.entries(e).forEach(([e,t])=>{void 0!==t&&(s[e]=t)}),await (0,r.set)(a,{...s,createdAt:new Date().toISOString()}),a.key},h=async(e,a)=>{let s={};Object.entries(a).forEach(([e,t])=>{void 0!==t&&(s[e]=t)}),await (0,r.update)((0,r.ref)(t.database,`${i("categories")}/${e}`),{...s,updatedAt:new Date().toISOString()})},b=async e=>{await (0,r.remove)((0,r.ref)(t.database,`${i("categories")}/${e}`))},g=async e=>(await d()).filter(t=>t.category===e||t.categoryId===e),y=async e=>(await g(e)).length,m=async(e,a)=>{let s=await g(e),o={};s.forEach(e=>{o[`${i("menu")}/${e.id}/category`]=a,o[`${i("menu")}/${e.id}/categoryId`]=a,o[`${i("menu")}/${e.id}/updatedAt`]=new Date().toISOString()}),Object.keys(o).length>0&&await (0,r.update)((0,r.ref)(t.database),o)},v=async()=>Object.entries((await (0,r.get)((0,r.ref)(t.database,i("workers")))).val()||{}).map(([e,t])=>({id:e,...t})),j=async(e,a)=>{await (0,r.update)((0,r.ref)(t.database,`${i("workers")}/${e}`),{detailedPermissions:a})},S=async()=>{let e=new Date;e.setHours(0,0,0,0);let t=e.getTime();return(await a()).filter(e=>(e.timestamp||(e.createdAt?new Date(e.createdAt).getTime():0))>=t&&"cancelled"!==e.status)},w=async(e,a)=>{let s={paymentStatus:a,updatedAt:new Date().toISOString()};"paid"===a&&(s.paidAt=new Date().toISOString()),await (0,r.update)((0,r.ref)(t.database,`${i("orders")}/${e}`),s)},k=async(e,a)=>{let s=await o(e);if(!s)throw Error("Order not found");let n=[...s.items||[]];for(let e of a){let t=n.findIndex(t=>t.id===e.id&&t.name===e.name);if(t>=0)n[t].quantity+=e.quantity,n[t].itemTotal=n[t].quantity*n[t].price;else{let t={id:e.id,name:e.name,price:e.price||0,quantity:e.quantity,itemTotal:e.quantity*(e.price||0)};e.emoji&&(t.emoji=e.emoji),e.note&&(t.note=e.note),n.push(t)}}let l=n.map(e=>{let t={id:e.id,name:e.name,price:e.price||0,quantity:e.quantity,itemTotal:e.itemTotal||e.quantity*(e.price||0)};return e.emoji&&(t.emoji=e.emoji),e.note&&(t.note=e.note),t}),d=l.reduce((e,t)=>e+(t.itemTotal||t.quantity*t.price),0),c=l.reduce((e,t)=>e+t.quantity,0);await (0,r.update)((0,r.ref)(t.database,`${i("orders")}/${e}`),{items:l,total:d,itemsCount:c,updatedAt:new Date().toISOString()})},C=async(e,t)=>{let r=(await a()).filter(e=>"cancelled"!==e.status);if(e&&t){let i=e.getTime(),a=t.getTime();r=r.filter(e=>{let t=e.timestamp||(e.createdAt?new Date(e.createdAt).getTime():0);return t>=i&&t<=a})}let i=r.filter(e=>"paid"===e.status||"completed"===e.status).reduce((e,t)=>e+(t.total||0),0),s=r.length,o=r.filter(e=>"paid"===e.status||"completed"===e.status).length;return{totalRevenue:i,ordersCount:s,paidOrders:o,itemsSold:r.reduce((e,t)=>e+(t.itemsCount||t.items?.length||0),0),averageOrder:s>0?i/o:0}},I=async()=>Object.entries((await (0,r.get)((0,r.ref)(t.database,i("tables")))).val()||{}).map(([e,t])=>({id:e,...t})),z=async(e,t)=>!(await I()).some(r=>r.tableNumber===e&&r.id!==t),R=async e=>{let t=await I(),r=e.trim().toLowerCase(),i=e=>{let t=e.match(/\d+/);return t?t[0]:e},a=i(r),s=t.find(t=>t.tableNumber===e);return s||(s=t.find(e=>i(e.tableNumber.toLowerCase())===a))?s:(s=t.find(e=>e.tableNumber.toLowerCase().includes(r)||r.includes(e.tableNumber.toLowerCase())))||null},_=async e=>{if(!await z(e.tableNumber))throw Error(`رقم الطاولة "${e.tableNumber}" موجود مسبقاً`);let a={tableNumber:e.tableNumber,area:e.area,status:e.status||"available",activeOrderId:null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};e.name&&e.name.trim()&&(a.name=e.name.trim());let s=(0,r.push)((0,r.ref)(t.database,i("tables")));return await (0,r.set)(s,a),s.key},N=async(e,a)=>{if(a.tableNumber&&!await z(a.tableNumber,e))throw Error(`رقم الطاولة "${a.tableNumber}" موجود مسبقاً`);let s={updatedAt:new Date().toISOString()};void 0!==a.tableNumber&&(s.tableNumber=a.tableNumber),void 0!==a.area&&(s.area=a.area),void 0!==a.status&&(s.status=a.status),void 0!==a.activeOrderId&&(s.activeOrderId=a.activeOrderId),void 0!==a.reservedBy&&(s.reservedBy=a.reservedBy),void 0!==a.reservedAt&&(s.reservedAt=a.reservedAt),void 0!==a.name&&(a.name&&a.name.trim()?s.name=a.name.trim():s.name=null),await (0,r.update)((0,r.ref)(t.database,`${i("tables")}/${e}`),s)},T=async(e,a,s,o)=>{let n={status:a,updatedAt:new Date().toISOString()};"available"===a?(n.activeOrderId=null,n.reservedBy=null,n.reservedAt=null):"reserved"===a?(n.reservedBy=o||null,n.reservedAt=new Date().toISOString()):"occupied"===a&&s&&(n.activeOrderId=s),await (0,r.update)((0,r.ref)(t.database,`${i("tables")}/${e}`),n)},A=async()=>Object.entries((await (0,r.get)((0,r.ref)(t.database,i("rooms")))).val()||{}).map(([e,t])=>({id:e,...t})).sort((e,t)=>(parseInt(String(e.roomNumber))||0)-(parseInt(String(t.roomNumber))||0)),O=async e=>{let a=(0,r.push)((0,r.ref)(t.database,i("rooms"))),s={roomNumber:e.roomNumber,status:e.status||"available",isActive:e.isActive??!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return e.name&&(s.name=e.name),e.notes&&(s.notes=e.notes),void 0!==e.hourlyRate&&e.hourlyRate>0&&(s.hourlyRate=e.hourlyRate),e.priceType&&(s.priceType=e.priceType),void 0!==e.malePrice&&(s.malePrice=e.malePrice),void 0!==e.femalePrice&&(s.femalePrice=e.femalePrice),await (0,r.set)(a,s),a.key},F=async(e,a)=>{let s={updatedAt:new Date().toISOString()};Object.entries(a).forEach(([e,t])=>{void 0!==t&&(s[e]=t)}),await (0,r.update)((0,r.ref)(t.database,`${i("rooms")}/${e}`),s)},W=async e=>{await (0,r.remove)((0,r.ref)(t.database,`${i("rooms")}/${e}`))},B=async(e,a,s,o)=>{let n={status:a,updatedAt:new Date().toISOString()};"available"===a?(n.activeOrderId=null,n.reservedBy=null,n.reservedAt=null):"reserved"===a?(n.reservedBy=o||null,n.reservedAt=new Date().toISOString()):"occupied"===a&&s&&(n.activeOrderId=s),await (0,r.update)((0,r.ref)(t.database,`${i("rooms")}/${e}`),n)},$=async()=>(await a()).filter(e=>"room"===e.orderType||e.roomId).sort((e,t)=>{let r=e.timestamp||(e.createdAt?new Date(e.createdAt).getTime():0);return(t.timestamp||(t.createdAt?new Date(t.createdAt).getTime():0))-r}),D=async e=>(await $()).filter(t=>{let r=t.timestamp||(t.createdAt?new Date(t.createdAt).getTime():0);return r>=e.start.getTime()&&r<=e.end.getTime()}),M=async(e,t)=>{await n(e,"completed"),await w(e,"paid"),await B(t,"available")};e.s(["addItemsToOrder",0,k,"closeRoomOrder",0,M,"createCategory",0,x,"createOrder",0,l,"createProduct",0,c,"createRoom",0,O,"createTable",0,_,"deleteCategory",0,b,"deleteProduct",0,f,"deleteRoom",0,W,"getCategories",0,u,"getCategoryProductCount",0,y,"getDateRangeForFilter",0,(e,t,r)=>{let i=new Date,a=new Date(i);a.setHours(23,59,59,999);let s=new Date(i);switch(s.setHours(0,0,0,0),e){case"today":break;case"week":s.setDate(s.getDate()-7);break;case"month":s.setMonth(s.getMonth()-1);break;case"year":s.setFullYear(s.getFullYear()-1);break;case"custom":t&&(s=new Date(t)),r&&(a.setTime(new Date(r).getTime()),a.setHours(23,59,59,999))}return{start:s,end:a}},"getDefaultWorkerPermissions",0,()=>({modules:{staffMenu:!0,orders:!1,tables:!1,rooms:!1,cashier:!1,inventory:!1,reports:!1,products:!1},actions:{createOrder:!0,editOrder:!1,cancelOrder:!1,processPayment:!1,applyDiscount:!1,viewFinancials:!1,manageProducts:!1,manageTables:!1,manageRooms:!1,dailyClosing:!1}}),"getFullPermissions",0,()=>({modules:{staffMenu:!0,orders:!0,tables:!0,rooms:!0,cashier:!0,inventory:!0,reports:!0,products:!0},actions:{createOrder:!0,editOrder:!0,cancelOrder:!0,processPayment:!0,applyDiscount:!0,viewFinancials:!0,manageProducts:!0,manageTables:!0,manageRooms:!0,dailyClosing:!0}}),"getOrder",0,o,"getOrders",0,a,"getOrdersByDateRange",0,s,"getProducts",0,d,"getRoomOrdersByDateRange",0,D,"getRooms",0,A,"getSalesStats",0,C,"getTables",0,I,"getTodayOrders",0,S,"getWorkers",0,v,"listenToOrders",0,e=>{let a=(0,r.ref)(t.database,i("orders")),s=(0,r.onValue)(a,t=>{e(Object.entries(t.val()||{}).map(([e,t])=>({id:e,...t})))});return()=>(0,r.off)(a,"value",s)},"listenToRooms",0,e=>{let a=(0,r.ref)(t.database,i("rooms")),s=(0,r.onValue)(a,t=>{e(Object.entries(t.val()||{}).map(([e,t])=>({id:e,...t})).sort((e,t)=>(parseInt(String(e.roomNumber))||0)-(parseInt(String(t.roomNumber))||0)))});return()=>(0,r.off)(a,"value",s)},"listenToTables",0,e=>{let a=(0,r.ref)(t.database,i("tables")),s=(0,r.onValue)(a,t=>{e(Object.entries(t.val()||{}).map(([e,t])=>({id:e,...t})))});return()=>(0,r.off)(a,"value",s)},"moveProductsToCategory",0,m,"setRoomStatus",0,B,"setTableStatus",0,T,"updateCategory",0,h,"updateOrderPaymentStatus",0,w,"updateOrderStatus",0,n,"updateProduct",0,p,"updateRoom",0,F,"updateTable",0,N,"updateWorkerPermissions",0,j])},16015,(e,t,r)=>{},98547,(e,t,r)=>{var i=e.i(47167);e.r(16015);var a=e.r(71645),s=a&&"object"==typeof a&&"default"in a?a:{default:a},o=void 0!==i.default&&i.default.env&&!0,n=function(e){return"[object String]"===Object.prototype.toString.call(e)},l=function(){function e(e){var t=void 0===e?{}:e,r=t.name,i=void 0===r?"stylesheet":r,a=t.optimizeForSpeed,s=void 0===a?o:a;d(n(i),"`name` must be a string"),this._name=i,this._deletedRulePlaceholder="#"+i+"-deleted-rule____{}",d("boolean"==typeof s,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=s,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var l="u">typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=l?l.getAttribute("content"):null}var t,r=e.prototype;return r.setOptimizeForSpeed=function(e){d("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),d(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},r.isOptimizeForSpeed=function(){return this._optimizeForSpeed},r.inject=function(){var e=this;if(d(!this._injected,"sheet already injected"),this._injected=!0,"u">typeof window&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(o||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,r){return"number"==typeof r?e._serverSheet.cssRules[r]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),r},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},r.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},r.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},r.insertRule=function(e,t){if(d(n(e),"`insertRule` accepts only strings"),"u"<typeof window)return"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++;if(this._optimizeForSpeed){var r=this.getSheet();"number"!=typeof t&&(t=r.cssRules.length);try{r.insertRule(e,t)}catch(t){return o||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var i=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,i))}return this._rulesCount++},r.replaceRule=function(e,t){if(this._optimizeForSpeed||"u"<typeof window){var r="u">typeof window?this.getSheet():this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!r.cssRules[e])return e;r.deleteRule(e);try{r.insertRule(t,e)}catch(i){o||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),r.insertRule(this._deletedRulePlaceholder,e)}}else{var i=this._tags[e];d(i,"old rule at index `"+e+"` not found"),i.textContent=t}return e},r.deleteRule=function(e){if("u"<typeof window)return void this._serverSheet.deleteRule(e);if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];d(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},r.flush=function(){this._injected=!1,this._rulesCount=0,"u">typeof window?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},r.cssRules=function(){var e=this;return"u"<typeof window?this._serverSheet.cssRules:this._tags.reduce(function(t,r){return r?t=t.concat(Array.prototype.map.call(e.getSheetForTag(r).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},r.makeStyleTag=function(e,t,r){t&&d(n(t),"makeStyleTag accepts only strings as second parameter");var i=document.createElement("style");this._nonce&&i.setAttribute("nonce",this._nonce),i.type="text/css",i.setAttribute("data-"+e,""),t&&i.appendChild(document.createTextNode(t));var a=document.head||document.getElementsByTagName("head")[0];return r?a.insertBefore(i,r):a.appendChild(i),i},t=[{key:"length",get:function(){return this._rulesCount}}],function(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t),e}();function d(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var c=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0},p={};function f(e,t){if(!t)return"jsx-"+e;var r=String(t),i=e+r;return p[i]||(p[i]="jsx-"+c(e+"-"+r)),p[i]}function u(e,t){"u"<typeof window&&(t=t.replace(/\/style/gi,"\\/style"));var r=e+t;return p[r]||(p[r]=t.replace(/__jsx-style-dynamic-selector/g,e)),p[r]}var x=function(){function e(e){var t=void 0===e?{}:e,r=t.styleSheet,i=void 0===r?null:r,a=t.optimizeForSpeed,s=void 0!==a&&a;this._sheet=i||new l({name:"styled-jsx",optimizeForSpeed:s}),this._sheet.inject(),i&&"boolean"==typeof s&&(this._sheet.setOptimizeForSpeed(s),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"u">typeof window&&!this._fromServer&&(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var r=this.getIdAndRules(e),i=r.styleId,a=r.rules;if(i in this._instancesCounts){this._instancesCounts[i]+=1;return}var s=a.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[i]=s,this._instancesCounts[i]=1},t.remove=function(e){var t=this,r=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(r in this._instancesCounts,"styleId: `"+r+"` not found"),this._instancesCounts[r]-=1,this._instancesCounts[r]<1){var i=this._fromServer&&this._fromServer[r];i?(i.parentNode.removeChild(i),delete this._fromServer[r]):(this._indices[r].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[r]),delete this._instancesCounts[r]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],r=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return r[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,r;return t=this.cssRules(),void 0===(r=e)&&(r={}),t.map(function(e){var t=e[0],i=e[1];return s.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:r.nonce?r.nonce:void 0,dangerouslySetInnerHTML:{__html:i}})})},t.getIdAndRules=function(e){var t=e.children,r=e.dynamic,i=e.id;if(r){var a=f(i,r);return{styleId:a,rules:Array.isArray(t)?t.map(function(e){return u(a,e)}):[u(a,t)]}}return{styleId:f(i),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),h=a.createContext(null);function b(){return new x}function g(){return a.useContext(h)}h.displayName="StyleSheetContext";var y=s.default.useInsertionEffect||s.default.useLayoutEffect,m="u">typeof window?b():void 0;function v(e){var t=m||g();return t&&("u"<typeof window?t.add(e):y(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)])),null}v.dynamic=function(e){return e.map(function(e){return f(e[0],e[1])}).join(" ")},r.StyleRegistry=function(e){var t=e.registry,r=e.children,i=a.useContext(h),o=a.useState(function(){return i||t||b()})[0];return s.default.createElement(h.Provider,{value:o},r)},r.createStyleRegistry=b,r.style=v,r.useStyleRegistry=g},37902,(e,t,r)=>{t.exports=e.r(98547).style},55436,e=>{"use strict";let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},73884,e=>{"use strict";let t=(0,e.i(75254).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],73884)},56909,e=>{"use strict";let t=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],56909)},50965,e=>{"use strict";let t=(0,e.i(75254).default)("shopping-bag",[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]]);e.s(["ShoppingBag",()=>t],50965)},16715,e=>{"use strict";let t=(0,e.i(75254).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],16715)},69638,e=>{"use strict";let t=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},70756,e=>{"use strict";let t=(0,e.i(75254).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>t],70756)},3281,e=>{"use strict";let t=(0,e.i(75254).default)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);e.s(["Printer",()=>t],3281)},61659,e=>{"use strict";let t=(0,e.i(75254).default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);e.s(["CreditCard",()=>t],61659)},3116,e=>{"use strict";let t=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],3116)},46897,e=>{"use strict";let t=(0,e.i(75254).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],46897)},95444,70956,e=>{"use strict";var t=e.i(75254);let r=(0,t.default)("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);e.s(["Grid3X3",()=>r],95444);let i=(0,t.default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);e.s(["List",()=>i],70956)},78917,86640,95740,e=>{"use strict";var t=e.i(75254);let r=(0,t.default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>r],78917);let i=(0,t.default)("lock-open",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);e.s(["Unlock",()=>i],86640);let a=(0,t.default)("circle-user",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);e.s(["UserCircle",()=>a],95740)},97912,e=>{"use strict";var t=e.i(43476),r=e.i(37902),i=e.i(71645),a=e.i(84103),s=e.i(3116),o=e.i(50965),n=e.i(96139),l=e.i(75254);let d=(0,l.default)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),c={available:{label:"متاحة",bgColor:"#dcfce7",borderColor:"#16a34a",textColor:"#15803d",cardBg:"linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)"},reserved:{label:"محجوزة",bgColor:"#fee2e2",borderColor:"#dc2626",textColor:"#dc2626",cardBg:"linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%)"},occupied:{label:"مشغولة",bgColor:"#fee2e2",borderColor:"#dc2626",textColor:"#dc2626",cardBg:"linear-gradient(135deg, #fef2f2 0%, #fecaca 100%)"}},p={داخلي:{label:"داخلي",icon:n.Coffee,color:"#6366f1"},VIP:{label:"VIP",icon:d,color:"#a855f7"},indoor:{label:"داخلي",icon:n.Coffee,color:"#6366f1"},vip:{label:"VIP",icon:d,color:"#a855f7"}};function f({table:e,activeOrder:r,onClick:i}){let a=c[e.status]||c.available,n=p[e.area]||p.indoor,l=n.icon,d=(()=>{if(!e.reservedAt&&!r?.createdAt)return null;let t=new Date(r?.createdAt||e.reservedAt||"").getTime(),i=Math.floor((Date.now()-t)/6e4);if(i<60)return`${i} دقيقة`;{let e=Math.floor(i/60);return`${e}س ${i%60}د`}})(),f=r?.items?.reduce((e,t)=>e+t.quantity,0)||0,u="available"!==e.status;return(0,t.jsxs)("div",{onClick:i,style:{background:a.cardBg,borderRadius:"16px",border:`2px solid ${a.borderColor}`,padding:"20px",cursor:"pointer",transition:"all 0.2s ease-in-out",position:"relative",overflow:"hidden",minHeight:"180px",display:"flex",flexDirection:"column"},onMouseOver:e=>{e.currentTarget.style.transform="translateY(-4px)",e.currentTarget.style.boxShadow=`0 12px 24px ${a.borderColor}30`},onMouseOut:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:[(0,t.jsx)("div",{style:{position:"absolute",top:"12px",left:"12px",padding:"4px 10px",borderRadius:"8px",backgroundColor:a.bgColor,border:`1px solid ${a.borderColor}`},children:(0,t.jsx)("span",{style:{fontSize:"11px",fontWeight:700,color:a.textColor},children:a.label})}),(0,t.jsxs)("div",{style:{position:"absolute",top:"12px",right:"12px",display:"flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"8px",backgroundColor:"#ffffff",border:"1px solid #e2e8f0"},children:[(0,t.jsx)(l,{style:{width:"12px",height:"12px",color:n.color}}),(0,t.jsx)("span",{style:{fontSize:"11px",fontWeight:600,color:"#475569"},children:n.label})]}),(0,t.jsxs)("div",{style:{marginTop:"36px",textAlign:"center",flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,t.jsx)("div",{style:{width:"64px",height:"64px",borderRadius:"16px",backgroundColor:u?a.borderColor:"#f1f5f9",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"12px"},children:(0,t.jsx)("span",{style:{fontSize:"24px",fontWeight:800,color:u?"#ffffff":"#475569"},children:e.tableNumber})}),(0,t.jsx)("p",{style:{fontSize:"16px",fontWeight:700,color:"#0f172a",margin:0},children:e.name||`طاولة ${e.tableNumber}`})]}),u&&(0,t.jsxs)("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:`1px solid ${a.borderColor}40`},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[f>0&&(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,t.jsx)(o.ShoppingBag,{style:{width:"14px",height:"14px",color:"#64748b"}}),(0,t.jsx)("span",{style:{fontSize:"12px",fontWeight:600,color:"#475569"},children:f})]}),d&&(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,t.jsx)(s.Clock,{style:{width:"14px",height:"14px",color:"#64748b"}}),(0,t.jsx)("span",{style:{fontSize:"12px",fontWeight:600,color:"#475569"},children:d})]})]}),r&&r.total>0&&(0,t.jsxs)("div",{style:{padding:"4px 10px",borderRadius:"8px",backgroundColor:"#ffffff",border:"1px solid #e2e8f0"},children:[(0,t.jsx)("span",{style:{fontSize:"13px",fontWeight:700,color:"#0f172a"},children:r.total.toFixed(3)}),(0,t.jsx)("span",{style:{fontSize:"10px",color:"#94a3b8",marginRight:"4px"},children:"ر.ع"})]})]}),e.reservedBy&&(0,t.jsxs)("p",{style:{fontSize:"12px",color:"#dc2626",marginTop:"8px",textAlign:"center"},children:["محجوزة لـ: ",e.reservedBy]})]})]})}var u=e.i(18566),x=e.i(37727),h=e.i(61911),b=e.i(46897),g=e.i(69638),y=e.i(63209),m=e.i(78917),v=e.i(3281),j=e.i(86640),S=e.i(70756),w=e.i(95740);let k=(0,l.default)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var C=e.i(56909),I=e.i(61659);let z=(0,l.default)("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),R={available:{label:"متاحة",color:"#16a34a",bg:"#dcfce7"},reserved:{label:"محجوزة",color:"#dc2626",bg:"#fee2e2"},occupied:{label:"مشغولة",color:"#dc2626",bg:"#fee2e2"}},_={داخلي:"داخلي",VIP:"VIP",indoor:"داخلي",vip:"VIP"};function N({table:e,activeOrder:r,onClose:o,onStatusChange:n}){var l;let d=(0,u.useRouter)(),[c,p]=(0,i.useState)(!1),[f,N]=(0,i.useState)(!1),[T,A]=(0,i.useState)(""),[O,F]=(0,i.useState)(!1),[W,B]=(0,i.useState)({tableNumber:e.tableNumber,name:e.name||"",area:e.area}),[$,D]=(0,i.useState)(""),[M,P]=(0,i.useState)(r),[E,q]=(0,i.useState)(!1);(0,i.useEffect)(()=>{(async()=>{if(!r&&"occupied"===e.status){q(!0);try{let t=(await (0,a.getOrders)()).find(t=>t.tableId===e.id&&"completed"!==t.status&&"cancelled"!==t.status&&"paid"!==t.paymentStatus);t&&P(t)}catch(e){console.error("Error finding order:",e)}finally{q(!1)}}})()},[e.id,e.status,r]);let L=R[e.status]||R.available,V="available"!==e.status,H=async()=>{p(!0);try{await (0,a.setTableStatus)(e.id,"available"),n(),o()}catch(e){console.error("Error setting table available:",e)}finally{p(!1)}},U=async()=>{if(T.trim()){p(!0);try{await (0,a.setTableStatus)(e.id,"reserved",null,T.trim()),n(),o()}catch(e){console.error("Error setting table reserved:",e)}finally{p(!1)}}},X=async()=>{p(!0);try{await (0,a.setTableStatus)(e.id,"occupied",M?.id),n(),o()}catch(e){console.error("Error setting table occupied:",e)}finally{p(!1)}},G=()=>{d.push(`/admin/cashier?tableId=${e.id}&orderId=${M?.id||""}`)},Y=async()=>{if(W.tableNumber.trim()){p(!0),D("");try{await (0,a.updateTable)(e.id,{tableNumber:W.tableNumber.trim(),name:W.name.trim()||void 0,area:W.area}),F(!1),n(),o()}catch(e){console.error("Error updating table:",e),D(e.message||"حدث خطأ في تحديث الطاولة")}finally{p(!1)}}},K=()=>{if(!e.reservedAt&&!M?.createdAt)return null;let t=new Date(M?.createdAt||e.reservedAt||"").getTime(),r=Math.floor((Date.now()-t)/6e4);if(r<60)return`${r} دقيقة`;{let e=Math.floor(r/60);return`${e} ساعة و ${r%60} دقيقة`}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{onClick:o,style:{position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:90}}),(0,t.jsxs)("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"520px",maxWidth:"95vw",maxHeight:"90vh",backgroundColor:"#ffffff",borderRadius:"20px",zIndex:100,overflow:"hidden",display:"flex",flexDirection:"column"},children:[(0,t.jsxs)("div",{style:{padding:"20px 24px",borderBottom:"1px solid #e2e8f0",display:"flex",alignItems:"center",justifyContent:"space-between",background:V?"linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%)":"linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[(0,t.jsx)("div",{style:{width:"56px",height:"56px",borderRadius:"14px",backgroundColor:V?"#dc2626":"#16a34a",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,t.jsx)("span",{style:{fontSize:"22px",fontWeight:800,color:"#ffffff"},children:e.tableNumber})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{style:{fontSize:"18px",fontWeight:700,color:"#0f172a",margin:0},children:e.name||`طاولة ${e.tableNumber}`}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginTop:"4px"},children:[(0,t.jsx)("span",{style:{padding:"3px 8px",borderRadius:"6px",backgroundColor:L.bg,color:L.color,fontSize:"11px",fontWeight:700},children:L.label}),(0,t.jsx)("span",{style:{fontSize:"13px",color:"#64748b"},children:_[e.area]||e.area})]})]})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,t.jsx)("button",{onClick:()=>F(!O),style:{width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:O?"#6366f1":"#ffffff",border:"1px solid #e2e8f0",borderRadius:"10px",cursor:"pointer",color:O?"#ffffff":"#64748b"},children:(0,t.jsx)(k,{style:{width:"16px",height:"16px"}})}),(0,t.jsx)("button",{onClick:o,style:{width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#ffffff",border:"1px solid #e2e8f0",borderRadius:"10px",cursor:"pointer",color:"#64748b"},children:(0,t.jsx)(x.X,{style:{width:"18px",height:"18px"}})})]})]}),(0,t.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:"24px"},children:[O&&(0,t.jsxs)("div",{style:{padding:"16px",backgroundColor:"#f0f9ff",borderRadius:"12px",marginBottom:"20px",border:"1px solid #bae6fd"},children:[(0,t.jsx)("h4",{style:{fontSize:"14px",fontWeight:600,color:"#0284c7",marginBottom:"16px"},children:"تعديل الطاولة"}),$&&(0,t.jsx)("div",{style:{padding:"10px 14px",backgroundColor:"#fee2e2",borderRadius:"8px",marginBottom:"12px",color:"#dc2626",fontSize:"13px"},children:$}),(0,t.jsxs)("div",{style:{display:"grid",gap:"12px"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",fontSize:"12px",fontWeight:600,color:"#475569",marginBottom:"6px"},children:"رقم الطاولة *"}),(0,t.jsx)("input",{type:"text",value:W.tableNumber,onChange:e=>B({...W,tableNumber:e.target.value}),style:{width:"100%",padding:"10px 12px",fontSize:"14px",border:"1px solid #e2e8f0",borderRadius:"8px",outline:"none"}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",fontSize:"12px",fontWeight:600,color:"#475569",marginBottom:"6px"},children:"اسم الطاولة (اختياري)"}),(0,t.jsx)("input",{type:"text",value:W.name,onChange:e=>B({...W,name:e.target.value}),placeholder:"مثال: طاولة الشرفة",style:{width:"100%",padding:"10px 12px",fontSize:"14px",border:"1px solid #e2e8f0",borderRadius:"8px",outline:"none"}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",fontSize:"12px",fontWeight:600,color:"#475569",marginBottom:"6px"},children:"المنطقة"}),(0,t.jsxs)("select",{value:W.area,onChange:e=>B({...W,area:e.target.value}),style:{width:"100%",padding:"10px 12px",fontSize:"14px",border:"1px solid #e2e8f0",borderRadius:"8px",outline:"none",backgroundColor:"#ffffff"},children:[(0,t.jsx)("option",{value:"داخلي",children:"داخلي"}),(0,t.jsx)("option",{value:"VIP",children:"VIP"})]})]})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"8px",marginTop:"16px"},children:[(0,t.jsxs)("button",{onClick:Y,disabled:c||!W.tableNumber.trim(),style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"10px",backgroundColor:"#0284c7",border:"none",borderRadius:"8px",fontSize:"13px",fontWeight:600,color:"#ffffff",cursor:c?"not-allowed":"pointer",opacity:c?.7:1},children:[(0,t.jsx)(C.Save,{style:{width:"16px",height:"16px"}}),c?"جاري الحفظ...":"حفظ التغييرات"]}),(0,t.jsx)("button",{onClick:()=>{F(!1),B({tableNumber:e.tableNumber,name:e.name||"",area:e.area}),D("")},style:{padding:"10px 16px",backgroundColor:"#ffffff",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"13px",fontWeight:600,color:"#475569",cursor:"pointer"},children:"إلغاء"})]})]}),(0,t.jsxs)("div",{style:{padding:"14px",backgroundColor:"#f8fafc",borderRadius:"12px",marginBottom:"20px"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px"},children:[(0,t.jsx)(b.MapPin,{style:{width:"16px",height:"16px",color:"#64748b"}}),(0,t.jsx)("span",{style:{fontSize:"12px",color:"#64748b"},children:"المنطقة"})]}),(0,t.jsx)("p",{style:{fontSize:"16px",fontWeight:700,color:"#0f172a",margin:0},children:_[e.area]||e.area})]}),e.reservedBy&&(0,t.jsxs)("div",{style:{padding:"14px",backgroundColor:"#fef2f2",borderRadius:"12px",marginBottom:"20px",display:"flex",alignItems:"center",gap:"12px"},children:[(0,t.jsx)(w.UserCircle,{style:{width:"20px",height:"20px",color:"#dc2626"}}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{style:{fontSize:"12px",color:"#dc2626",margin:0},children:"محجوزة لـ"}),(0,t.jsx)("p",{style:{fontSize:"14px",fontWeight:600,color:"#dc2626",margin:0},children:e.reservedBy})]}),K()&&(0,t.jsxs)("div",{style:{marginRight:"auto",display:"flex",alignItems:"center",gap:"6px"},children:[(0,t.jsx)(s.Clock,{style:{width:"14px",height:"14px",color:"#dc2626"}}),(0,t.jsx)("span",{style:{fontSize:"12px",color:"#dc2626"},children:K()})]})]}),E&&"occupied"===e.status&&(0,t.jsxs)("div",{style:{padding:"20px",textAlign:"center",color:"#64748b"},children:[(0,t.jsx)("div",{style:{width:"24px",height:"24px",border:"3px solid #e2e8f0",borderTopColor:"#6366f1",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 8px"}}),(0,t.jsx)("p",{style:{fontSize:"13px",margin:0},children:"جاري تحميل الطلب..."})]}),!E&&!M&&"occupied"===e.status&&(0,t.jsxs)("div",{style:{padding:"16px",backgroundColor:"#fef3c7",borderRadius:"12px",marginBottom:"20px",textAlign:"center"},children:[(0,t.jsx)(y.AlertCircle,{style:{width:"24px",height:"24px",color:"#f59e0b",margin:"0 auto 8px"}}),(0,t.jsx)("p",{style:{fontSize:"13px",color:"#92400e",margin:0},children:"لا يوجد طلب مرتبط بهذه الطاولة"}),(0,t.jsx)("p",{style:{fontSize:"12px",color:"#a16207",margin:"4px 0 0 0"},children:"يمكنك إنشاء طلب جديد من الكاشير"})]}),M&&(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,t.jsx)("h3",{style:{fontSize:"14px",fontWeight:600,color:"#475569",marginBottom:"12px"},children:"الطلب الحالي"}),(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",backgroundColor:"#f8fafc",borderRadius:"12px 12px 0 0",border:"1px solid #e2e8f0",borderBottom:"none"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,t.jsxs)("span",{style:{fontSize:"13px",fontWeight:700,color:"#6366f1",fontFamily:"monospace"},children:["#",M.id.slice(-6).toUpperCase()]}),(0,t.jsx)("span",{style:{fontSize:"12px",color:"#94a3b8"},children:(l=M.createdAt)?new Date(l).toLocaleString("ar-EG",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"})]}),(0,t.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:"paid"===M.paymentStatus||"paid"===M.status?(0,t.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 8px",borderRadius:"6px",backgroundColor:"#dcfce7",color:"#16a34a",fontSize:"11px",fontWeight:600},children:[(0,t.jsx)(g.CheckCircle,{style:{width:"12px",height:"12px"}}),"مدفوع"]}):(0,t.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"4px",padding:"4px 8px",borderRadius:"6px",backgroundColor:"#fef3c7",color:"#f59e0b",fontSize:"11px",fontWeight:600},children:[(0,t.jsx)(y.AlertCircle,{style:{width:"12px",height:"12px"}}),"غير مدفوع"]})})]}),(0,t.jsxs)("div",{style:{border:"1px solid #e2e8f0",borderRadius:"0 0 12px 12px",overflow:"hidden"},children:[M.items?.map((e,r)=>(0,t.jsxs)("div",{style:{padding:"12px 16px",borderBottom:r<M.items.length-1?"1px solid #f1f5f9":"none",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{style:{fontSize:"14px",fontWeight:500,color:"#0f172a",margin:0},children:[e.emoji&&(0,t.jsx)("span",{style:{marginLeft:"6px"},children:e.emoji}),e.name]}),(0,t.jsxs)("p",{style:{fontSize:"12px",color:"#64748b",margin:"2px 0 0 0"},children:[e.quantity," × ",(e.price||0).toFixed(3)," ر.ع"]})]}),(0,t.jsxs)("span",{style:{fontSize:"14px",fontWeight:600,color:"#0f172a"},children:[(e.itemTotal||e.quantity*(e.price||0)).toFixed(3)," ر.ع"]})]},r)),(0,t.jsxs)("div",{style:{padding:"14px 16px",backgroundColor:"#f8fafc",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsx)("span",{style:{fontSize:"14px",fontWeight:600,color:"#475569"},children:"الإجمالي"}),(0,t.jsxs)("span",{style:{fontSize:"18px",fontWeight:700,color:"#16a34a"},children:[M.total.toFixed(3)," ر.ع"]})]})]})]}),f&&(0,t.jsxs)("div",{style:{padding:"16px",backgroundColor:"#fef2f2",borderRadius:"12px",marginBottom:"20px"},children:[(0,t.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:600,color:"#dc2626",marginBottom:"8px"},children:"اسم الحجز"}),(0,t.jsx)("input",{type:"text",value:T,onChange:e=>A(e.target.value),placeholder:"أدخل اسم العميل أو الحجز...",style:{width:"100%",padding:"12px 14px",fontSize:"14px",border:"1px solid #fecaca",borderRadius:"10px",outline:"none",marginBottom:"12px"}}),(0,t.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,t.jsx)("button",{onClick:U,disabled:c||!T.trim(),style:{flex:1,padding:"12px",backgroundColor:"#dc2626",border:"none",borderRadius:"10px",fontSize:"13px",fontWeight:600,color:"#ffffff",cursor:c||!T.trim()?"not-allowed":"pointer",opacity:c||!T.trim()?.7:1},children:c?"جاري الحفظ...":"تأكيد الحجز"}),(0,t.jsx)("button",{onClick:()=>N(!1),style:{padding:"12px 16px",backgroundColor:"#ffffff",border:"1px solid #e2e8f0",borderRadius:"10px",fontSize:"13px",fontWeight:600,color:"#475569",cursor:"pointer"},children:"إلغاء"})]})]})]}),(0,t.jsxs)("div",{style:{padding:"16px 24px",borderTop:"1px solid #e2e8f0",backgroundColor:"#f8fafc"},children:["occupied"===e.status&&(0,t.jsxs)("button",{onClick:()=>{M?d.push(`/admin/cashier?tableId=${e.id}&orderId=${M.id}&mode=add`):d.push(`/admin/cashier?tableId=${e.id}&tableNumber=${encodeURIComponent(e.tableNumber)}`),o()},style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",padding:"16px",background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",border:"none",borderRadius:"14px",fontSize:"16px",fontWeight:700,color:"#ffffff",cursor:"pointer",marginBottom:"12px",boxShadow:"0 4px 12px rgba(99, 102, 241, 0.3)"},children:[(0,t.jsx)(z,{style:{width:"22px",height:"22px"}}),"إضافة طلب جديد للطاولة"]}),M&&"paid"!==M.paymentStatus&&"completed"!==M.status&&(0,t.jsxs)("button",{onClick:G,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",padding:"16px",background:"linear-gradient(135deg, #16a34a 0%, #22c55e 100%)",border:"none",borderRadius:"14px",fontSize:"16px",fontWeight:700,color:"#ffffff",cursor:"pointer",marginBottom:"12px",boxShadow:"0 4px 12px rgba(22, 163, 74, 0.3)"},children:[(0,t.jsx)(I.CreditCard,{style:{width:"22px",height:"22px"}}),"الدفع الآن - ",M.total?.toFixed(3)||"0.000"," ر.ع"]}),(0,t.jsx)("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:V?(0,t.jsxs)("button",{onClick:H,disabled:c,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"14px",backgroundColor:"#16a34a",border:"none",borderRadius:"12px",fontSize:"14px",fontWeight:600,color:"#ffffff",cursor:c?"not-allowed":"pointer"},children:[(0,t.jsx)(j.Unlock,{style:{width:"18px",height:"18px"}}),"تحرير الطاولة"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{onClick:()=>N(!0),disabled:c,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"14px",backgroundColor:"#dc2626",border:"none",borderRadius:"12px",fontSize:"14px",fontWeight:600,color:"#ffffff",cursor:"pointer"},children:[(0,t.jsx)(S.Lock,{style:{width:"18px",height:"18px"}}),"حجز"]}),(0,t.jsxs)("button",{onClick:X,disabled:c,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"14px",backgroundColor:"#f59e0b",border:"none",borderRadius:"12px",fontSize:"14px",fontWeight:600,color:"#ffffff",cursor:"pointer"},children:[(0,t.jsx)(h.Users,{style:{width:"18px",height:"18px"}}),"مشغولة"]})]})}),(0,t.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[M&&(0,t.jsxs)("button",{onClick:G,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"12px",backgroundColor:"#ffffff",border:"1px solid #6366f1",borderRadius:"10px",fontSize:"13px",fontWeight:600,color:"#6366f1",cursor:"pointer"},children:[(0,t.jsx)(m.ExternalLink,{style:{width:"16px",height:"16px"}}),"فتح في الكاشير"]}),(0,t.jsxs)("button",{onClick:()=>{window.print()},style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"12px 16px",backgroundColor:"#ffffff",border:"1px solid #e2e8f0",borderRadius:"10px",fontSize:"13px",fontWeight:600,color:"#475569",cursor:"pointer"},children:[(0,t.jsx)(v.Printer,{style:{width:"16px",height:"16px"}}),"طباعة"]})]})]})]})]})}var T=e.i(55436),A=e.i(7233),O=e.i(16715),F=e.i(95444),W=e.i(73884);let B=(0,l.default)("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);var $=e.i(70956);let D=[{value:"all",label:"جميع المناطق",icon:F.Grid3X3},{value:"داخلي",label:"داخلي",icon:n.Coffee},{value:"VIP",label:"VIP",icon:d}],M=[{value:"all",label:"الكل",icon:F.Grid3X3,color:"#64748b"},{value:"available",label:"متاحة",icon:g.CheckCircle,color:"#16a34a"},{value:"reserved",label:"محجوزة",icon:y.AlertCircle,color:"#f59e0b"},{value:"occupied",label:"مشغولة",icon:W.XCircle,color:"#dc2626"}];function P(){let[e,s]=(0,i.useState)([]),[o,n]=(0,i.useState)({}),[l,d]=(0,i.useState)(!0),[c,p]=(0,i.useState)(null),[u,x]=(0,i.useState)(!1),[h,b]=(0,i.useState)("desktop"),[g,y]=(0,i.useState)("all"),[m,v]=(0,i.useState)("all"),[j,S]=(0,i.useState)(""),[w,k]=(0,i.useState)("grid");(0,i.useEffect)(()=>{let e=()=>{let e=window.innerWidth;e<640?b("mobile"):e<1024?b("tablet"):b("desktop")};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let C="mobile"===h,I="tablet"===h;(0,i.useEffect)(()=>{d(!0);let e=(0,a.listenToTables)(async e=>{s(e);let t={};try{let r=(await (0,a.getOrders)()).filter(e=>"completed"!==e.status&&"cancelled"!==e.status&&"paid"!==e.paymentStatus);await Promise.all(e.filter(e=>"occupied"===e.status).map(async e=>{try{if(e.activeOrderId){let r=await (0,a.getOrder)(e.activeOrderId);if(r){t[e.id]=r;return}}let i=r.find(t=>t.tableId===e.id);i&&(t[e.id]=i)}catch(e){console.error("Error fetching order:",e)}}))}catch(e){console.error("Error fetching orders:",e)}n(t),d(!1)});return()=>e()},[]);let z=(0,i.useMemo)(()=>e.filter(e=>{if("all"!==g&&e.area!==g||"all"!==m&&e.status!==m)return!1;if(j){let t=j.toLowerCase(),r=String(e.tableNumber).toLowerCase(),i=(e.name||"").toLowerCase();if(!r.includes(t)&&!i.includes(t))return!1}return!0}).sort((e,t)=>(parseInt(String(e.tableNumber))||0)-(parseInt(String(t.tableNumber))||0)),[e,g,m,j]),R=(0,i.useMemo)(()=>{let t=e.length,r=e.filter(e=>"available"===e.status).length;return{total:t,available:r,reserved:e.filter(e=>"reserved"===e.status).length,occupied:e.filter(e=>"occupied"===e.status).length}},[e]);return(0,t.jsxs)("div",{style:{padding:C?"16px":I?"20px":"24px"},className:"jsx-4b22437fb54054bc",children:[(0,t.jsxs)("div",{style:{display:"flex",flexDirection:C?"column":"row",justifyContent:"space-between",alignItems:C?"stretch":"center",gap:C?"16px":"0",marginBottom:C?"16px":"24px"},className:"jsx-4b22437fb54054bc",children:[(0,t.jsxs)("div",{className:"jsx-4b22437fb54054bc",children:[(0,t.jsx)("h1",{style:{fontSize:C?"20px":"24px",fontWeight:700,color:"#0f172a",margin:0},className:"jsx-4b22437fb54054bc",children:"الطاولات"}),(0,t.jsx)("p",{style:{fontSize:C?"12px":"14px",color:"#64748b",marginTop:"4px"},className:"jsx-4b22437fb54054bc",children:"إدارة ومتابعة حالة الطاولات"})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:C?"8px":"12px"},className:"jsx-4b22437fb54054bc",children:[(0,t.jsxs)("button",{onClick:()=>{window.location.reload()},style:{display:"flex",alignItems:"center",gap:C?"4px":"8px",padding:C?"8px 12px":"10px 16px",backgroundColor:"#f1f5f9",border:"1px solid #e2e8f0",borderRadius:C?"10px":"12px",fontSize:C?"12px":"14px",fontWeight:600,color:"#475569",cursor:"pointer"},className:"jsx-4b22437fb54054bc",children:[(0,t.jsx)(O.RefreshCw,{style:{width:C?"16px":"18px",height:C?"16px":"18px"}}),!C&&"تحديث"]}),(0,t.jsxs)("button",{onClick:()=>x(!0),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 20px",background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",border:"none",borderRadius:"12px",fontSize:"14px",fontWeight:600,color:"#ffffff",cursor:"pointer"},className:"jsx-4b22437fb54054bc",children:[(0,t.jsx)(A.Plus,{style:{width:"18px",height:"18px"}}),"إضافة طاولة"]})]})]}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:C||I?"repeat(2, 1fr)":"repeat(4, 1fr)",gap:C?"10px":"16px",marginBottom:C?"16px":"24px"},className:"jsx-4b22437fb54054bc",children:[(0,t.jsxs)("div",{style:{padding:C?"14px":"20px",backgroundColor:"#ffffff",borderRadius:C?"12px":"16px",border:"1px solid #e2e8f0"},className:"jsx-4b22437fb54054bc",children:[(0,t.jsx)("p",{style:{fontSize:C?"11px":"12px",color:"#64748b",marginBottom:"4px"},className:"jsx-4b22437fb54054bc",children:"إجمالي الطاولات"}),(0,t.jsx)("p",{style:{fontSize:C?"22px":"28px",fontWeight:700,color:"#0f172a",margin:0},className:"jsx-4b22437fb54054bc",children:R.total})]}),(0,t.jsxs)("div",{style:{padding:C?"14px":"20px",backgroundColor:"#f0fdf4",borderRadius:C?"12px":"16px",border:"1px solid #16a34a"},className:"jsx-4b22437fb54054bc",children:[(0,t.jsx)("p",{style:{fontSize:C?"11px":"12px",color:"#16a34a",marginBottom:"4px"},className:"jsx-4b22437fb54054bc",children:"متاحة"}),(0,t.jsx)("p",{style:{fontSize:C?"22px":"28px",fontWeight:700,color:"#16a34a",margin:0},className:"jsx-4b22437fb54054bc",children:R.available})]}),(0,t.jsxs)("div",{style:{padding:C?"14px":"20px",backgroundColor:"#fef3c7",borderRadius:C?"12px":"16px",border:"1px solid #f59e0b"},className:"jsx-4b22437fb54054bc",children:[(0,t.jsx)("p",{style:{fontSize:C?"11px":"12px",color:"#f59e0b",marginBottom:"4px"},className:"jsx-4b22437fb54054bc",children:"محجوزة"}),(0,t.jsx)("p",{style:{fontSize:C?"22px":"28px",fontWeight:700,color:"#f59e0b",margin:0},className:"jsx-4b22437fb54054bc",children:R.reserved})]}),(0,t.jsxs)("div",{style:{padding:C?"14px":"20px",backgroundColor:"#fee2e2",borderRadius:C?"12px":"16px",border:"1px solid #dc2626"},className:"jsx-4b22437fb54054bc",children:[(0,t.jsx)("p",{style:{fontSize:C?"11px":"12px",color:"#dc2626",marginBottom:"4px"},className:"jsx-4b22437fb54054bc",children:"مشغولة"}),(0,t.jsx)("p",{style:{fontSize:C?"22px":"28px",fontWeight:700,color:"#dc2626",margin:0},className:"jsx-4b22437fb54054bc",children:R.occupied})]})]}),(0,t.jsx)("div",{style:{backgroundColor:"#ffffff",borderRadius:C?"12px":"16px",border:"1px solid #e2e8f0",padding:C?"12px":"20px",marginBottom:C?"16px":"24px"},className:"jsx-4b22437fb54054bc",children:(0,t.jsxs)("div",{style:{display:"flex",gap:C?"10px":"16px",flexWrap:"wrap",alignItems:"center"},className:"jsx-4b22437fb54054bc",children:[(0,t.jsx)("div",{style:{flex:1,minWidth:C?"100%":"200px"},className:"jsx-4b22437fb54054bc",children:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"0 14px",height:C?"40px":"44px",backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:C?"10px":"12px"},className:"jsx-4b22437fb54054bc",children:[(0,t.jsx)(T.Search,{style:{width:"18px",height:"18px",color:"#94a3b8"}}),(0,t.jsx)("input",{type:"text",value:j,onChange:e=>S(e.target.value),placeholder:"ابحث برقم الطاولة...",style:{flex:1,border:"none",outline:"none",fontSize:C?"13px":"14px",color:"#0f172a",backgroundColor:"transparent"},className:"jsx-4b22437fb54054bc"})]})}),(0,t.jsx)("div",{style:{display:"flex",gap:"8px",overflowX:"auto",minWidth:C?"100%":"auto",paddingBottom:C?"4px":"0"},className:"jsx-4b22437fb54054bc",children:D.map(e=>{let r=e.icon;return(0,t.jsxs)("button",{onClick:()=>y(e.value),style:{display:"flex",alignItems:"center",gap:"6px",padding:C?"6px 10px":"8px 14px",borderRadius:"10px",border:"none",fontSize:C?"12px":"13px",fontWeight:600,cursor:"pointer",backgroundColor:g===e.value?"#6366f1":"#f1f5f9",color:g===e.value?"#ffffff":"#475569",whiteSpace:"nowrap",flexShrink:0},className:"jsx-4b22437fb54054bc",children:[(0,t.jsx)(r,{style:{width:"14px",height:"14px"},className:"jsx-4b22437fb54054bc"}),e.label]},e.value)})}),(0,t.jsx)("div",{style:{display:"flex",gap:"8px",overflowX:"auto",minWidth:C?"100%":"auto",paddingBottom:C?"4px":"0"},className:"jsx-4b22437fb54054bc",children:M.map(e=>{let r=e.icon;return(0,t.jsxs)("button",{onClick:()=>v(e.value),style:{display:"flex",alignItems:"center",gap:"6px",padding:C?"6px 10px":"8px 14px",borderRadius:"10px",border:m===e.value?`2px solid ${e.color}`:"1px solid #e2e8f0",fontSize:C?"12px":"13px",fontWeight:600,cursor:"pointer",backgroundColor:m===e.value?`${e.color}20`:"#ffffff",color:m===e.value?e.color:"#475569",whiteSpace:"nowrap",flexShrink:0},className:"jsx-4b22437fb54054bc",children:[(0,t.jsx)(r,{style:{width:"14px",height:"14px"},className:"jsx-4b22437fb54054bc"}),e.label]},e.value)})}),(0,t.jsxs)("div",{style:{display:"flex",gap:"4px",padding:"4px",backgroundColor:"#f1f5f9",borderRadius:"10px"},className:"jsx-4b22437fb54054bc",children:[(0,t.jsx)("button",{onClick:()=>k("grid"),style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"grid"===w?"#ffffff":"transparent",color:"grid"===w?"#6366f1":"#94a3b8",cursor:"pointer",boxShadow:"grid"===w?"0 1px 3px rgba(0,0,0,0.1)":"none"},className:"jsx-4b22437fb54054bc",children:(0,t.jsx)(B,{style:{width:"18px",height:"18px"}})}),(0,t.jsx)("button",{onClick:()=>k("list"),style:{padding:"8px",borderRadius:"8px",border:"none",backgroundColor:"list"===w?"#ffffff":"transparent",color:"list"===w?"#6366f1":"#94a3b8",cursor:"pointer",boxShadow:"list"===w?"0 1px 3px rgba(0,0,0,0.1)":"none"},className:"jsx-4b22437fb54054bc",children:(0,t.jsx)($.List,{style:{width:"18px",height:"18px"}})})]})]})}),l?(0,t.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"80px",color:"#64748b"},className:"jsx-4b22437fb54054bc",children:(0,t.jsx)("div",{style:{width:"40px",height:"40px",border:"4px solid #e2e8f0",borderTopColor:"#6366f1",borderRadius:"50%",animation:"spin 1s linear infinite"},className:"jsx-4b22437fb54054bc"})}):0===z.length?(0,t.jsxs)("div",{style:{textAlign:"center",padding:"80px",backgroundColor:"#ffffff",borderRadius:"16px",border:"1px solid #e2e8f0"},className:"jsx-4b22437fb54054bc",children:[(0,t.jsx)(F.Grid3X3,{style:{width:"48px",height:"48px",color:"#cbd5e1",marginBottom:"16px"}}),(0,t.jsx)("p",{style:{fontSize:"16px",color:"#475569",marginBottom:"8px"},className:"jsx-4b22437fb54054bc",children:j||"all"!==g||"all"!==m?"لا توجد طاولات تطابق البحث":"لا توجد طاولات"}),(0,t.jsx)("p",{style:{fontSize:"14px",color:"#94a3b8"},className:"jsx-4b22437fb54054bc",children:j||"all"!==g||"all"!==m?"جرب تغيير الفلاتر":"ابدأ بإضافة طاولة جديدة"})]}):(0,t.jsx)("div",{style:{display:"grid",gridTemplateColumns:"grid"===w?C?"repeat(auto-fill, minmax(150px, 1fr))":I?"repeat(auto-fill, minmax(200px, 1fr))":"repeat(auto-fill, minmax(260px, 1fr))":"1fr",gap:C?"10px":"16px"},className:"jsx-4b22437fb54054bc",children:z.map(e=>(0,t.jsx)(f,{table:e,activeOrder:o[e.id],onClick:()=>{p(e)}},e.id))}),c&&(0,t.jsx)(N,{table:c,activeOrder:o[c.id],onClose:()=>p(null),onStatusChange:()=>{}}),u&&(0,t.jsx)(E,{onClose:()=>x(!1),onSave:async e=>{await (0,a.createTable)(e),x(!1)}}),(0,t.jsx)(r.default,{id:"4b22437fb54054bc",children:"@keyframes spin{to{transform:rotate(360deg)}}"})]})}function E({onClose:e,onSave:r}){let[a,s]=(0,i.useState)(!1),[o,n]=(0,i.useState)(""),[l,d]=(0,i.useState)({tableNumber:"",name:"",area:"داخلي"}),c=async e=>{if(e.preventDefault(),l.tableNumber){s(!0),n("");try{await r({tableNumber:l.tableNumber.trim(),name:l.name.trim()||void 0,area:l.area,status:"available"})}catch(e){console.error("Error creating table:",e),n(e.message||"حدث خطأ أثناء إضافة الطاولة"),s(!1)}}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{onClick:e,style:{position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:90}}),(0,t.jsxs)("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"420px",maxWidth:"95vw",backgroundColor:"#ffffff",borderRadius:"20px",zIndex:100,overflow:"hidden"},children:[(0,t.jsxs)("div",{style:{padding:"20px 24px",borderBottom:"1px solid #e2e8f0",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,t.jsx)("h2",{style:{fontSize:"18px",fontWeight:700,color:"#0f172a",margin:0},children:"إضافة طاولة جديدة"}),(0,t.jsx)("button",{onClick:e,style:{width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f1f5f9",border:"none",borderRadius:"10px",cursor:"pointer",color:"#64748b"},children:"✕"})]}),(0,t.jsxs)("form",{onSubmit:c,style:{padding:"24px"},children:[o&&(0,t.jsx)("div",{style:{padding:"12px 16px",backgroundColor:"#fee2e2",borderRadius:"12px",marginBottom:"16px",color:"#dc2626",fontSize:"14px",fontWeight:500},children:o}),(0,t.jsxs)("div",{style:{display:"grid",gap:"16px"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:600,color:"#475569",marginBottom:"8px"},children:"رقم الطاولة *"}),(0,t.jsx)("input",{type:"text",value:l.tableNumber,onChange:e=>d({...l,tableNumber:e.target.value}),placeholder:"مثال: 1, A1, VIP1",required:!0,style:{width:"100%",padding:"12px 14px",fontSize:"14px",border:"1px solid #e2e8f0",borderRadius:"12px",outline:"none"}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:600,color:"#475569",marginBottom:"8px"},children:"اسم الطاولة (اختياري)"}),(0,t.jsx)("input",{type:"text",value:l.name,onChange:e=>d({...l,name:e.target.value}),placeholder:"مثال: طاولة الشرفة",style:{width:"100%",padding:"12px 14px",fontSize:"14px",border:"1px solid #e2e8f0",borderRadius:"12px",outline:"none"}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:600,color:"#475569",marginBottom:"8px"},children:"المنطقة *"}),(0,t.jsxs)("select",{value:l.area,onChange:e=>d({...l,area:e.target.value}),required:!0,style:{width:"100%",padding:"12px 14px",fontSize:"14px",border:"1px solid #e2e8f0",borderRadius:"12px",outline:"none",backgroundColor:"#ffffff",cursor:"pointer"},children:[(0,t.jsx)("option",{value:"داخلي",children:"داخلي"}),(0,t.jsx)("option",{value:"VIP",children:"VIP"})]})]})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"12px",marginTop:"24px"},children:[(0,t.jsx)("button",{type:"submit",disabled:a||!l.tableNumber,style:{flex:1,padding:"14px",background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",border:"none",borderRadius:"12px",fontSize:"14px",fontWeight:600,color:"#ffffff",cursor:a||!l.tableNumber?"not-allowed":"pointer",opacity:a||!l.tableNumber?.7:1},children:a?"جاري الإضافة...":"إضافة الطاولة"}),(0,t.jsx)("button",{type:"button",onClick:e,style:{padding:"14px 24px",backgroundColor:"#f1f5f9",border:"none",borderRadius:"12px",fontSize:"14px",fontWeight:600,color:"#475569",cursor:"pointer"},children:"إلغاء"})]})]})]})]})}e.s(["default",()=>P],97912)}]);