(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,82126,e=>{"use strict";var t=e.i(43476),o=e.i(37902),s=e.i(71645),a=e.i(13056),r=e.i(33842);e.i(1465);var i=e.i(34991);let l=e=>`restaurant-system/${e}/${r.RESTAURANT_ID}`,d=e=>e.stockQty<=0?"out_of_stock":e.stockQty<=e.minStock?"low_stock":"in_stock",n=async()=>Object.entries((await (0,i.get)((0,i.ref)(r.database,l("menu")))).val()||{}).map(([e,t])=>({id:e,name:t.name||"",nameEn:t.nameEn,category:t.category||"",categoryId:t.categoryId||t.category||"",sku:t.sku||"",barcode:t.barcode||"",stockQty:t.stockQty??t.stock??0,minStock:t.minStock??10,cost:t.cost,price:t.price||0,imageUrl:t.imageUrl||t.image,emoji:t.emoji,isActive:!1!==t.active&&!1!==t.isActive,lastStockUpdate:t.lastStockUpdate,createdAt:t.createdAt,updatedAt:t.updatedAt})).sort((e,t)=>e.name.localeCompare(t.name,"ar")),c=async()=>{let e=await n(),t=new Date;t.setHours(0,0,0,0);let o=t.getTime(),s=(await (0,i.get)((0,i.ref)(r.database,l("stock_movements")))).val()||{},a=0,d=0;Object.values(s).forEach(e=>{e.timestamp>=o&&("in"===e.type?a+=Math.abs(e.qtyChange):"out"===e.type&&(d+=Math.abs(e.qtyChange)))});let c=e.length,p=e.filter(e=>e.stockQty<=0).length;return{totalProducts:c,totalInStock:c-p,lowStockCount:e.filter(e=>e.stockQty>0&&e.stockQty<=e.minStock).length,outOfStockCount:p,totalStockValue:e.reduce((e,t)=>e+t.stockQty*(t.cost||t.price),0),todayMovementsIn:a,todayMovementsOut:d}},p=async(e,t,o,s,a,d)=>{let n=(0,i.ref)(r.database,`${l("menu")}/${e}`),c=await (0,i.get)(n);if(!c.exists())throw Error("Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");let p=c.val(),x=p.stockQty??p.stock??0,f=x+t;await (0,i.update)(n,{stockQty:f,stock:f,lastStockUpdate:new Date().toISOString(),updatedAt:new Date().toISOString()});let g=(0,i.push)((0,i.ref)(r.database,l("stock_movements"))),u={productId:e,productName:p.name,type:"in",qtyChange:t,prevQty:x,newQty:f,reason:"Ø¥Ø¶Ø§ÙØ© Ù…Ø®Ø²ÙˆÙ†",note:a,supplier:d,createdBy:o,createdByName:s,createdAt:new Date().toISOString(),timestamp:Date.now()};await (0,i.set)(g,{id:g.key,...u})},x=async(e,t,o,s,a,d)=>{let n=(0,i.ref)(r.database,`${l("menu")}/${e}`),c=await (0,i.get)(n);if(!c.exists())throw Error("Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");let p=c.val(),x=p.stockQty??p.stock??0,f=Math.max(0,x-t);await (0,i.update)(n,{stockQty:f,stock:f,lastStockUpdate:new Date().toISOString(),updatedAt:new Date().toISOString()});let g=(0,i.push)((0,i.ref)(r.database,l("stock_movements"))),u={productId:e,productName:p.name,type:"out",qtyChange:-t,prevQty:x,newQty:f,reason:o,note:d,createdBy:s,createdByName:a,createdAt:new Date().toISOString(),timestamp:Date.now()};await (0,i.set)(g,{id:g.key,...u})},f=async(e,t,o,s,a,d)=>{let n=(0,i.ref)(r.database,`${l("menu")}/${e}`),c=await (0,i.get)(n);if(!c.exists())throw Error("Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");let p=c.val(),x=p.stockQty??p.stock??0,f=t-x;await (0,i.update)(n,{stockQty:t,stock:t,lastStockUpdate:new Date().toISOString(),updatedAt:new Date().toISOString()});let g=(0,i.push)((0,i.ref)(r.database,l("stock_movements"))),u={productId:e,productName:p.name,type:"adjust",qtyChange:f,prevQty:x,newQty:t,reason:o,note:d,createdBy:s,createdByName:a,createdAt:new Date().toISOString(),timestamp:Date.now()};await (0,i.set)(g,{id:g.key,...u})},g=async(e,t,o)=>{let s=Object.entries((await (0,i.get)((0,i.ref)(r.database,l("stock_movements")))).val()||{}).map(([e,t])=>({id:e,...t})).filter(t=>t.productId===e);if(t){let e=t.getTime();s=s.filter(t=>t.timestamp>=e)}if(o){let e=o.getTime();s=s.filter(t=>t.timestamp<=e)}return s.sort((e,t)=>t.timestamp-e.timestamp)},u=[{id:"sale",label:"Ø¨ÙŠØ¹"},{id:"waste",label:"ØªØ§Ù„Ù / Ù‡Ø¯Ø±"},{id:"return",label:"Ù…Ø±ØªØ¬Ø¹ Ù„Ù„Ù…ÙˆØ±Ø¯"},{id:"damage",label:"ØªÙ„Ù"},{id:"expired",label:"Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©"},{id:"internal",label:"Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¯Ø§Ø®Ù„ÙŠ"},{id:"other",label:"Ø³Ø¨Ø¨ Ø¢Ø®Ø±"}],h=[{id:"inventory_count",label:"Ø¬Ø±Ø¯ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†"},{id:"correction",label:"ØªØµØ­ÙŠØ­ Ø®Ø·Ø£"},{id:"initial",label:"Ø¥Ø¯Ø®Ø§Ù„ Ø£ÙˆÙ„ÙŠ"},{id:"system_sync",label:"Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ù†Ø¸Ø§Ù…"},{id:"other",label:"Ø³Ø¨Ø¨ Ø¢Ø®Ø±"}];var b=e.i(84103),y=e.i(88844),m=e.i(78894),j=e.i(73884),k=e.i(25652),v=e.i(35408),C=e.i(12426);function S({stats:e,loading:s}){let a=[{title:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",value:e.totalProducts,icon:y.Package,color:"#6366f1",bgColor:"rgba(99, 102, 241, 0.1)",subtitle:`${e.totalInStock} Ù…ØªÙˆÙØ±`},{title:"Ù…Ø®Ø²ÙˆÙ† Ù…Ù†Ø®ÙØ¶",value:e.lowStockCount,icon:m.AlertTriangle,color:"#f59e0b",bgColor:"rgba(245, 158, 11, 0.1)",subtitle:"ÙŠØ­ØªØ§Ø¬ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹Ø¨Ø¦Ø©",alert:e.lowStockCount>0},{title:"Ù†ÙØ¯ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†",value:e.outOfStockCount,icon:j.XCircle,color:"#ef4444",bgColor:"rgba(239, 68, 68, 0.1)",subtitle:"Ù…Ù†ØªØ¬Ø§Øª ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©",alert:e.outOfStockCount>0},{title:"Ø­Ø±ÙƒØ© Ø§Ù„ÙŠÙˆÙ… (ÙˆØ§Ø±Ø¯)",value:e.todayMovementsIn,icon:k.TrendingUp,color:"#22c55e",bgColor:"rgba(34, 197, 94, 0.1)",subtitle:"Ø¥Ø¶Ø§ÙØ§Øª Ø§Ù„ÙŠÙˆÙ…"},{title:"Ø­Ø±ÙƒØ© Ø§Ù„ÙŠÙˆÙ… (ØµØ§Ø¯Ø±)",value:e.todayMovementsOut,icon:v.TrendingDown,color:"#8b5cf6",bgColor:"rgba(139, 92, 246, 0.1)",subtitle:"Ø³Ø­ÙˆØ¨Ø§Øª Ø§Ù„ÙŠÙˆÙ…"},{title:"Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†",value:e.totalStockValue.toFixed(2),icon:C.DollarSign,color:"#06b6d4",bgColor:"rgba(6, 182, 212, 0.1)",subtitle:"Ø±.Ø¹",isPrice:!0}];return s?(0,t.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[1,2,3,4,5,6].map(e=>(0,t.jsxs)("div",{style:{backgroundColor:"#ffffff",borderRadius:"16px",padding:"20px",border:"1px solid #e2e8f0",animation:"pulse 1.5s infinite"},children:[(0,t.jsx)("div",{style:{width:"48px",height:"48px",backgroundColor:"#f1f5f9",borderRadius:"12px",marginBottom:"16px"}}),(0,t.jsx)("div",{style:{width:"60%",height:"14px",backgroundColor:"#f1f5f9",borderRadius:"4px",marginBottom:"8px"}}),(0,t.jsx)("div",{style:{width:"40%",height:"28px",backgroundColor:"#f1f5f9",borderRadius:"4px"}})]},e))}):(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},className:"jsx-29f1ff35ad8eb4cc",children:[a.map((e,o)=>{let s=e.icon;return(0,t.jsxs)("div",{style:{backgroundColor:"#ffffff",borderRadius:"16px",padding:"20px",border:e.alert?`2px solid ${e.color}40`:"1px solid #e2e8f0",position:"relative",overflow:"hidden",transition:"all 0.2s"},className:"jsx-29f1ff35ad8eb4cc",children:[(0,t.jsx)("div",{style:{position:"absolute",top:"-20px",left:"-20px",width:"100px",height:"100px",background:e.bgColor,borderRadius:"50%",opacity:.5},className:"jsx-29f1ff35ad8eb4cc"}),(0,t.jsx)("div",{style:{width:"48px",height:"48px",backgroundColor:e.bgColor,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"16px",position:"relative"},className:"jsx-29f1ff35ad8eb4cc",children:(0,t.jsx)(s,{style:{width:"24px",height:"24px",color:e.color},className:"jsx-29f1ff35ad8eb4cc"})}),(0,t.jsx)("p",{style:{fontSize:"13px",color:"#64748b",marginBottom:"6px",fontWeight:500},className:"jsx-29f1ff35ad8eb4cc",children:e.title}),(0,t.jsxs)("p",{style:{fontSize:"28px",fontWeight:700,color:"#0f172a",marginBottom:"4px",display:"flex",alignItems:"baseline",gap:"6px"},className:"jsx-29f1ff35ad8eb4cc",children:[e.value,e.isPrice&&(0,t.jsx)("span",{style:{fontSize:"14px",color:"#64748b",fontWeight:500},className:"jsx-29f1ff35ad8eb4cc",children:e.subtitle})]}),!e.isPrice&&(0,t.jsx)("p",{style:{fontSize:"12px",color:e.alert?e.color:"#94a3b8",fontWeight:e.alert?500:400},className:"jsx-29f1ff35ad8eb4cc",children:e.subtitle}),e.alert&&(0,t.jsx)("div",{style:{position:"absolute",top:"16px",left:"16px",width:"8px",height:"8px",backgroundColor:e.color,borderRadius:"50%",animation:"pulse 1.5s infinite"},className:"jsx-29f1ff35ad8eb4cc"})]},o)}),(0,t.jsx)(o.default,{id:"29f1ff35ad8eb4cc",children:"@keyframes pulse{0%,to{opacity:1}50%{opacity:.5}}"})]})}var w=e.i(55436),z=e.i(64659),N=e.i(55900),I=e.i(7233),R=e.i(99023),B=e.i(88511),T=e.i(75254);let A=(0,T.default)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var W=e.i(69638),M=e.i(23585);let D=(0,T.default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);function O({products:e,categories:o,loading:a,onAddStock:r,onRemoveStock:i,onAdjustStock:l,onViewHistory:n,onExport:c}){let[p,x]=(0,s.useState)(""),[f,g]=(0,s.useState)("all"),[u,h]=(0,s.useState)("all"),[b,k]=(0,s.useState)("name"),[v,C]=(0,s.useState)("asc"),[S,T]=(0,s.useState)(1),[O,Q]=(0,s.useState)(null),U=(0,s.useMemo)(()=>{let t=[...e];if(p){let e=p.toLowerCase();t=t.filter(t=>t.name.toLowerCase().includes(e)||t.sku?.toLowerCase().includes(e)||t.barcode?.toLowerCase().includes(e))}return"all"!==f&&(t=t.filter(e=>e.categoryId===f||e.category===f)),"all"!==u&&(t=t.filter(e=>d(e)===u)),t.sort((e,t)=>{let o=0;switch(b){case"name":o=e.name.localeCompare(t.name,"ar");break;case"stockQty":o=e.stockQty-t.stockQty;break;case"price":o=e.price-t.price;break;case"lastStockUpdate":o=(e.lastStockUpdate||"").localeCompare(t.lastStockUpdate||"")}return"asc"===v?o:-o}),t},[e,p,f,u,b,v]),_=Math.ceil(U.length/15),E=U.slice((S-1)*15,15*S),q=e=>{b===e?C("asc"===v?"desc":"asc"):(k(e),C("asc"))},$=({field:e})=>b!==e?null:"asc"===v?(0,t.jsx)(N.ChevronUp,{style:{width:"14px",height:"14px"}}):(0,t.jsx)(z.ChevronDown,{style:{width:"14px",height:"14px"}});return a?(0,t.jsxs)("div",{style:{backgroundColor:"#ffffff",borderRadius:"16px",border:"1px solid #e2e8f0",overflow:"hidden"},children:[(0,t.jsx)("div",{style:{padding:"20px",borderBottom:"1px solid #e2e8f0"},children:(0,t.jsx)("div",{style:{width:"200px",height:"40px",backgroundColor:"#f1f5f9",borderRadius:"8px"}})}),(0,t.jsx)("div",{style:{padding:"20px"},children:[1,2,3,4,5].map(e=>(0,t.jsxs)("div",{style:{display:"flex",gap:"16px",padding:"16px 0",borderBottom:"1px solid #f1f5f9"},children:[(0,t.jsx)("div",{style:{width:"48px",height:"48px",backgroundColor:"#f1f5f9",borderRadius:"8px"}}),(0,t.jsxs)("div",{style:{flex:1},children:[(0,t.jsx)("div",{style:{width:"40%",height:"16px",backgroundColor:"#f1f5f9",borderRadius:"4px",marginBottom:"8px"}}),(0,t.jsx)("div",{style:{width:"20%",height:"12px",backgroundColor:"#f1f5f9",borderRadius:"4px"}})]})]},e))})]}):(0,t.jsxs)("div",{style:{backgroundColor:"#ffffff",borderRadius:"16px",border:"1px solid #e2e8f0",overflow:"hidden"},children:[(0,t.jsxs)("div",{style:{padding:"20px",borderBottom:"1px solid #e2e8f0",display:"flex",flexWrap:"wrap",gap:"12px",alignItems:"center"},children:[(0,t.jsxs)("div",{style:{flex:"1 1 300px",position:"relative"},children:[(0,t.jsx)(w.Search,{style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",width:"18px",height:"18px",color:"#94a3b8"}}),(0,t.jsx)("input",{type:"text",value:p,onChange:e=>{x(e.target.value),T(1)},placeholder:"Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ SKU Ø£Ùˆ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯...",style:{width:"100%",padding:"10px 40px 10px 12px",backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"10px",fontSize:"14px",outline:"none"}})]}),(0,t.jsxs)("select",{value:f,onChange:e=>{g(e.target.value),T(1)},style:{padding:"10px 32px 10px 12px",backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"10px",fontSize:"14px",outline:"none",cursor:"pointer"},children:[(0,t.jsx)("option",{value:"all",children:"ÙƒÙ„ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª"}),o.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,t.jsxs)("select",{value:u,onChange:e=>{h(e.target.value),T(1)},style:{padding:"10px 32px 10px 12px",backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"10px",fontSize:"14px",outline:"none",cursor:"pointer"},children:[(0,t.jsx)("option",{value:"all",children:"ÙƒÙ„ Ø§Ù„Ø­Ø§Ù„Ø§Øª"}),(0,t.jsx)("option",{value:"in_stock",children:"Ù…ØªÙˆÙØ±"}),(0,t.jsx)("option",{value:"low_stock",children:"Ù…Ù†Ø®ÙØ¶"}),(0,t.jsx)("option",{value:"out_of_stock",children:"Ù†ÙØ¯"})]}),(0,t.jsxs)("button",{onClick:c,style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"10px",fontSize:"14px",fontWeight:500,color:"#475569",cursor:"pointer"},children:[(0,t.jsx)(D,{style:{width:"16px",height:"16px"}}),"ØªØµØ¯ÙŠØ±"]})]}),(0,t.jsx)("div",{style:{overflowX:"auto"},children:(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{style:{backgroundColor:"#f8fafc"},children:[(0,t.jsx)("th",{style:{padding:"14px 20px",textAlign:"right",fontSize:"12px",fontWeight:600,color:"#64748b",borderBottom:"1px solid #e2e8f0"},children:"Ø§Ù„Ù…Ù†ØªØ¬"}),(0,t.jsx)("th",{style:{padding:"14px 16px",textAlign:"right",fontSize:"12px",fontWeight:600,color:"#64748b",borderBottom:"1px solid #e2e8f0"},children:"Ø§Ù„ØªØµÙ†ÙŠÙ"}),(0,t.jsx)("th",{style:{padding:"14px 16px",textAlign:"right",fontSize:"12px",fontWeight:600,color:"#64748b",borderBottom:"1px solid #e2e8f0"},children:"SKU / Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯"}),(0,t.jsx)("th",{onClick:()=>q("stockQty"),style:{padding:"14px 16px",textAlign:"right",fontSize:"12px",fontWeight:600,color:"#64748b",borderBottom:"1px solid #e2e8f0",cursor:"pointer",userSelect:"none"},children:(0,t.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:["Ø§Ù„ÙƒÙ…ÙŠØ©",(0,t.jsx)($,{field:"stockQty"})]})}),(0,t.jsx)("th",{style:{padding:"14px 16px",textAlign:"right",fontSize:"12px",fontWeight:600,color:"#64748b",borderBottom:"1px solid #e2e8f0"},children:"Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰"}),(0,t.jsx)("th",{onClick:()=>q("price"),style:{padding:"14px 16px",textAlign:"right",fontSize:"12px",fontWeight:600,color:"#64748b",borderBottom:"1px solid #e2e8f0",cursor:"pointer",userSelect:"none"},children:(0,t.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:["Ø§Ù„Ø³Ø¹Ø±",(0,t.jsx)($,{field:"price"})]})}),(0,t.jsx)("th",{style:{padding:"14px 16px",textAlign:"right",fontSize:"12px",fontWeight:600,color:"#64748b",borderBottom:"1px solid #e2e8f0"},children:"Ø§Ù„Ø­Ø§Ù„Ø©"}),(0,t.jsx)("th",{style:{padding:"14px 16px",textAlign:"center",fontSize:"12px",fontWeight:600,color:"#64748b",borderBottom:"1px solid #e2e8f0"},children:"Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"})]})}),(0,t.jsx)("tbody",{children:0===E.length?(0,t.jsx)("tr",{children:(0,t.jsxs)("td",{colSpan:8,style:{padding:"60px 20px",textAlign:"center"},children:[(0,t.jsx)(y.Package,{style:{width:"48px",height:"48px",color:"#cbd5e1",margin:"0 auto 16px"}}),(0,t.jsx)("p",{style:{fontSize:"16px",color:"#64748b",marginBottom:"4px"},children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª"}),(0,t.jsx)("p",{style:{fontSize:"13px",color:"#94a3b8"},children:p||"all"!==f||"all"!==u?"Ø¬Ø±Ø¨ ØªØºÙŠÙŠØ± Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¨Ø­Ø«":"Ù„Ù… ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø¹Ø¯"})]})}):E.map(e=>{let s=d(e),a=(e=>{switch(e){case"in_stock":return{label:"Ù…ØªÙˆÙØ±",color:"#22c55e",bgColor:"rgba(34, 197, 94, 0.1)",icon:W.CheckCircle};case"low_stock":return{label:"Ù…Ù†Ø®ÙØ¶",color:"#f59e0b",bgColor:"rgba(245, 158, 11, 0.1)",icon:m.AlertTriangle};case"out_of_stock":return{label:"Ù†ÙØ¯",color:"#ef4444",bgColor:"rgba(239, 68, 68, 0.1)",icon:j.XCircle}}})(s),c=a.icon;return(0,t.jsxs)("tr",{style:{borderBottom:"1px solid #f1f5f9",transition:"background-color 0.15s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#f8fafc",onMouseOut:e=>e.currentTarget.style.backgroundColor="transparent",children:[(0,t.jsx)("td",{style:{padding:"16px 20px"},children:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,t.jsx)("div",{style:{width:"48px",height:"48px",borderRadius:"10px",backgroundColor:"#f1f5f9",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",fontSize:"24px"},children:e.imageUrl?(0,t.jsx)("img",{src:e.imageUrl,alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):e.emoji||"ðŸ“¦"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{style:{fontSize:"14px",fontWeight:600,color:"#0f172a",marginBottom:"2px"},children:e.name}),e.nameEn&&(0,t.jsx)("p",{style:{fontSize:"12px",color:"#94a3b8"},children:e.nameEn})]})]})}),(0,t.jsx)("td",{style:{padding:"16px"},children:(0,t.jsx)("span",{style:{padding:"4px 10px",backgroundColor:"#f1f5f9",borderRadius:"6px",fontSize:"12px",color:"#475569"},children:o.find(t=>t.id===e.categoryId)?.name||e.category||"-"})}),(0,t.jsx)("td",{style:{padding:"16px"},children:(0,t.jsxs)("div",{children:[e.sku&&(0,t.jsx)("p",{style:{fontSize:"13px",color:"#0f172a",fontFamily:"monospace"},children:e.sku}),e.barcode&&(0,t.jsx)("p",{style:{fontSize:"11px",color:"#94a3b8",fontFamily:"monospace"},children:e.barcode}),!e.sku&&!e.barcode&&(0,t.jsx)("span",{style:{color:"#cbd5e1"},children:"-"})]})}),(0,t.jsx)("td",{style:{padding:"16px"},children:(0,t.jsx)("span",{style:{fontSize:"16px",fontWeight:700,color:"out_of_stock"===s?"#ef4444":"low_stock"===s?"#f59e0b":"#0f172a"},children:e.stockQty})}),(0,t.jsx)("td",{style:{padding:"16px"},children:(0,t.jsx)("span",{style:{fontSize:"14px",color:"#64748b"},children:e.minStock})}),(0,t.jsxs)("td",{style:{padding:"16px"},children:[(0,t.jsx)("span",{style:{fontSize:"14px",fontWeight:600,color:"#0f172a"},children:e.price.toFixed(3)}),(0,t.jsx)("span",{style:{fontSize:"11px",color:"#94a3b8",marginRight:"2px"},children:"Ø±.Ø¹"})]}),(0,t.jsx)("td",{style:{padding:"16px"},children:(0,t.jsxs)("span",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",backgroundColor:a.bgColor,borderRadius:"20px",fontSize:"12px",fontWeight:600,color:a.color},children:[(0,t.jsx)(c,{style:{width:"14px",height:"14px"}}),a.label]})}),(0,t.jsx)("td",{style:{padding:"16px",textAlign:"center"},children:(0,t.jsxs)("div",{style:{position:"relative",display:"inline-block"},children:[(0,t.jsx)("button",{onClick:()=>Q(O===e.id?null:e.id),style:{padding:"8px",backgroundColor:"transparent",border:"none",borderRadius:"8px",cursor:"pointer",color:"#64748b"},children:(0,t.jsx)(M.MoreVertical,{style:{width:"18px",height:"18px"}})}),O===e.id&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{onClick:()=>Q(null),style:{position:"fixed",inset:0,zIndex:10}}),(0,t.jsxs)("div",{style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",backgroundColor:"#ffffff",borderRadius:"12px",boxShadow:"0 10px 40px rgba(0,0,0,0.15)",border:"1px solid #e2e8f0",padding:"8px",minWidth:"160px",zIndex:20},children:[(0,t.jsxs)("button",{onClick:()=>{r(e),Q(null)},style:{width:"100%",display:"flex",alignItems:"center",gap:"10px",padding:"10px 12px",backgroundColor:"transparent",border:"none",borderRadius:"8px",fontSize:"13px",color:"#22c55e",cursor:"pointer",textAlign:"right"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#f1f5f9",onMouseOut:e=>e.currentTarget.style.backgroundColor="transparent",children:[(0,t.jsx)(I.Plus,{style:{width:"16px",height:"16px"}}),"Ø¥Ø¶Ø§ÙØ© Ù…Ø®Ø²ÙˆÙ†"]}),(0,t.jsxs)("button",{onClick:()=>{i(e),Q(null)},style:{width:"100%",display:"flex",alignItems:"center",gap:"10px",padding:"10px 12px",backgroundColor:"transparent",border:"none",borderRadius:"8px",fontSize:"13px",color:"#ef4444",cursor:"pointer",textAlign:"right"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#f1f5f9",onMouseOut:e=>e.currentTarget.style.backgroundColor="transparent",children:[(0,t.jsx)(R.Minus,{style:{width:"16px",height:"16px"}}),"Ø³Ø­Ø¨ Ù…Ø®Ø²ÙˆÙ†"]}),(0,t.jsxs)("button",{onClick:()=>{l(e),Q(null)},style:{width:"100%",display:"flex",alignItems:"center",gap:"10px",padding:"10px 12px",backgroundColor:"transparent",border:"none",borderRadius:"8px",fontSize:"13px",color:"#6366f1",cursor:"pointer",textAlign:"right"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#f1f5f9",onMouseOut:e=>e.currentTarget.style.backgroundColor="transparent",children:[(0,t.jsx)(B.Edit,{style:{width:"16px",height:"16px"}}),"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙƒÙ…ÙŠØ©"]}),(0,t.jsx)("div",{style:{height:"1px",backgroundColor:"#e2e8f0",margin:"4px 0"}}),(0,t.jsxs)("button",{onClick:()=>{n(e),Q(null)},style:{width:"100%",display:"flex",alignItems:"center",gap:"10px",padding:"10px 12px",backgroundColor:"transparent",border:"none",borderRadius:"8px",fontSize:"13px",color:"#475569",cursor:"pointer",textAlign:"right"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#f1f5f9",onMouseOut:e=>e.currentTarget.style.backgroundColor="transparent",children:[(0,t.jsx)(A,{style:{width:"16px",height:"16px"}}),"Ø³Ø¬Ù„ Ø§Ù„Ø­Ø±ÙƒØ§Øª"]})]})]})]})})]},e.id)})})]})}),_>1&&(0,t.jsxs)("div",{style:{padding:"16px 20px",borderTop:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsxs)("p",{style:{fontSize:"13px",color:"#64748b"},children:["Ø¹Ø±Ø¶ ",(S-1)*15+1," - ",Math.min(15*S,U.length)," Ù…Ù† ",U.length]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,t.jsx)("button",{onClick:()=>T(e=>Math.max(1,e-1)),disabled:1===S,style:{padding:"8px 16px",backgroundColor:1===S?"#f1f5f9":"#ffffff",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"13px",color:1===S?"#94a3b8":"#475569",cursor:1===S?"not-allowed":"pointer"},children:"Ø§Ù„Ø³Ø§Ø¨Ù‚"}),(0,t.jsx)("button",{onClick:()=>T(e=>Math.min(_,e+1)),disabled:S===_,style:{padding:"8px 16px",backgroundColor:S===_?"#f1f5f9":"#6366f1",border:"1px solid transparent",borderRadius:"8px",fontSize:"13px",color:S===_?"#94a3b8":"#ffffff",cursor:S===_?"not-allowed":"pointer"},children:"Ø§Ù„ØªØ§Ù„ÙŠ"})]})]})]})}var Q=e.i(37727);function U({type:e,product:o,onClose:a,onConfirm:r,loading:i}){let[l,d]=(0,s.useState)("adjust"===e?o.stockQty:1),[n,c]=(0,s.useState)(""),[p,x]=(0,s.useState)(""),[f,g]=(0,s.useState)(""),b=(()=>{switch(e){case"add":return{title:"Ø¥Ø¶Ø§ÙØ© Ù…Ø®Ø²ÙˆÙ†",icon:I.Plus,color:"#22c55e",bgColor:"rgba(34, 197, 94, 0.1)",buttonText:"Ø¥Ø¶Ø§ÙØ©",buttonBg:"linear-gradient(135deg, #22c55e 0%, #16a34a 100%)"};case"remove":return{title:"Ø³Ø­Ø¨ Ù…Ø®Ø²ÙˆÙ†",icon:R.Minus,color:"#ef4444",bgColor:"rgba(239, 68, 68, 0.1)",buttonText:"Ø³Ø­Ø¨",buttonBg:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)"};case"adjust":return{title:"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙƒÙ…ÙŠØ©",icon:B.Edit,color:"#6366f1",bgColor:"rgba(99, 102, 241, 0.1)",buttonText:"Ø­ÙØ¸",buttonBg:"linear-gradient(135deg, #6366f1 0%, #4f46e5 100%)"}}})(),y=b.icon,m=async t=>{t.preventDefault(),await r({quantity:l,reason:n,note:p,supplier:"add"===e?f:void 0})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{onClick:a,style:{position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:100}}),(0,t.jsxs)("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"440px",maxWidth:"95vw",backgroundColor:"#ffffff",borderRadius:"20px",zIndex:101,overflow:"hidden"},children:[(0,t.jsxs)("div",{style:{padding:"24px",borderBottom:"1px solid #e2e8f0",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,t.jsx)("div",{style:{width:"48px",height:"48px",backgroundColor:b.bgColor,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,t.jsx)(y,{style:{width:"24px",height:"24px",color:b.color}})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{style:{fontSize:"18px",fontWeight:700,color:"#0f172a",margin:0},children:b.title}),(0,t.jsx)("p",{style:{fontSize:"13px",color:"#64748b",marginTop:"2px"},children:o.name})]})]}),(0,t.jsx)("button",{onClick:a,style:{width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f1f5f9",border:"none",borderRadius:"10px",cursor:"pointer",color:"#64748b"},children:(0,t.jsx)(Q.X,{style:{width:"18px",height:"18px"}})})]}),(0,t.jsxs)("form",{onSubmit:m,children:[(0,t.jsxs)("div",{style:{padding:"24px"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",marginBottom:"24px"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,t.jsx)("div",{style:{width:"48px",height:"48px",backgroundColor:"#ffffff",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",overflow:"hidden"},children:o.imageUrl?(0,t.jsx)("img",{src:o.imageUrl,alt:o.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):o.emoji||"ðŸ“¦"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{style:{fontSize:"12px",color:"#64748b"},children:"Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©"}),(0,t.jsx)("p",{style:{fontSize:"24px",fontWeight:700,color:"#0f172a"},children:o.stockQty})]})]}),(0,t.jsxs)("div",{style:{textAlign:"left"},children:[(0,t.jsx)("p",{style:{fontSize:"12px",color:"#64748b"},children:"Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©"}),(0,t.jsx)("p",{style:{fontSize:"24px",fontWeight:700,color:"remove"===e?"#ef4444":"#22c55e"},children:(()=>{switch(e){case"add":return o.stockQty+l;case"remove":return Math.max(0,o.stockQty-l);case"adjust":return l}})()})]})]}),(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,t.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:600,color:"#374151",marginBottom:"10px"},children:"adjust"===e?"Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©":"Ø§Ù„ÙƒÙ…ÙŠØ©"}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:["adjust"!==e&&(0,t.jsx)("button",{type:"button",onClick:()=>d(e=>Math.max(1,e-1)),style:{width:"48px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f1f5f9",border:"none",borderRadius:"12px",cursor:"pointer",color:"#475569"},children:(0,t.jsx)(R.Minus,{style:{width:"20px",height:"20px"}})}),(0,t.jsx)("input",{type:"number",value:l,onChange:e=>d(Math.max(0,parseInt(e.target.value)||0)),min:"0",style:{flex:1,padding:"14px 16px",backgroundColor:"#f8fafc",border:"2px solid #e2e8f0",borderRadius:"12px",fontSize:"18px",fontWeight:700,color:"#0f172a",textAlign:"center",outline:"none"}}),"adjust"!==e&&(0,t.jsx)("button",{type:"button",onClick:()=>d(e=>e+1),style:{width:"48px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:b.color,border:"none",borderRadius:"12px",cursor:"pointer",color:"#ffffff"},children:(0,t.jsx)(I.Plus,{style:{width:"20px",height:"20px"}})})]}),"adjust"!==e&&(0,t.jsx)("div",{style:{display:"flex",gap:"8px",marginTop:"12px"},children:[5,10,25,50,100].map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>d(e),style:{flex:1,padding:"8px",backgroundColor:l===e?b.bgColor:"#f1f5f9",border:l===e?`1px solid ${b.color}`:"1px solid transparent",borderRadius:"8px",fontSize:"13px",fontWeight:600,color:l===e?b.color:"#64748b",cursor:"pointer"},children:e},e))})]}),("remove"===e||"adjust"===e)&&(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,t.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:600,color:"#374151",marginBottom:"10px"},children:"Ø§Ù„Ø³Ø¨Ø¨"}),(0,t.jsxs)("select",{value:n,onChange:e=>c(e.target.value),required:!0,style:{width:"100%",padding:"14px 16px",backgroundColor:"#f8fafc",border:"2px solid #e2e8f0",borderRadius:"12px",fontSize:"14px",color:"#0f172a",outline:"none",cursor:"pointer"},children:[(0,t.jsx)("option",{value:"",children:"Ø§Ø®ØªØ± Ø§Ù„Ø³Ø¨Ø¨"}),("remove"===e?u:h).map(e=>(0,t.jsx)("option",{value:e.label,children:e.label},e.id))]})]}),"add"===e&&(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,t.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:600,color:"#374151",marginBottom:"10px"},children:"Ø§Ù„Ù…ÙˆØ±Ø¯ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),(0,t.jsx)("input",{type:"text",value:f,onChange:e=>g(e.target.value),placeholder:"Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ±Ø¯",style:{width:"100%",padding:"14px 16px",backgroundColor:"#f8fafc",border:"2px solid #e2e8f0",borderRadius:"12px",fontSize:"14px",color:"#0f172a",outline:"none"}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:600,color:"#374151",marginBottom:"10px"},children:"Ù…Ù„Ø§Ø­Ø¸Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),(0,t.jsx)("textarea",{value:p,onChange:e=>x(e.target.value),placeholder:"Ø£Ø¶Ù Ù…Ù„Ø§Ø­Ø¸Ø©...",rows:3,style:{width:"100%",padding:"14px 16px",backgroundColor:"#f8fafc",border:"2px solid #e2e8f0",borderRadius:"12px",fontSize:"14px",color:"#0f172a",outline:"none",resize:"none"}})]})]}),(0,t.jsxs)("div",{style:{padding:"16px 24px",borderTop:"1px solid #e2e8f0",display:"flex",gap:"12px"},children:[(0,t.jsx)("button",{type:"button",onClick:a,style:{flex:1,padding:"14px",backgroundColor:"#f1f5f9",border:"none",borderRadius:"12px",fontSize:"14px",fontWeight:600,color:"#475569",cursor:"pointer"},children:"Ø¥Ù„ØºØ§Ø¡"}),(0,t.jsx)("button",{type:"submit",disabled:i||"add"!==e&&!n,style:{flex:1,padding:"14px",background:i?"#94a3b8":b.buttonBg,border:"none",borderRadius:"12px",fontSize:"14px",fontWeight:600,color:"#ffffff",cursor:i||"add"!==e&&!n?"not-allowed":"pointer",opacity:i||"add"!==e&&!n?.6:1},children:i?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...":b.buttonText})]})]})]})]})}var _=e.i(87316),E=e.i(84614),q=e.i(78583);function $({product:e,onClose:a}){let[r,i]=(0,s.useState)([]),[l,d]=(0,s.useState)(!0),[n,c]=(0,s.useState)("month"),[p,x]=(0,s.useState)(""),[f,u]=(0,s.useState)("");(0,s.useEffect)(()=>{h()},[n,p,f]);let h=async()=>{d(!0);try{let{start:t,end:o}=(()=>{let e=new Date;switch(n){case"today":let t=new Date(e);return t.setHours(0,0,0,0),{start:t};case"week":let o=new Date(e);return o.setDate(o.getDate()-7),{start:o};case"month":let s=new Date(e);return s.setMonth(s.getMonth()-1),{start:s};case"custom":return{start:p?new Date(p):void 0,end:f?new Date(f):void 0};default:return{}}})(),s=await g(e.id,t,o);i(s)}catch(e){console.error("Error loading history:",e)}finally{d(!1)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{onClick:a,style:{position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:100},className:"jsx-d08a2d59e2d19d47"}),(0,t.jsxs)("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"600px",maxWidth:"95vw",maxHeight:"85vh",backgroundColor:"#ffffff",borderRadius:"20px",zIndex:101,overflow:"hidden",display:"flex",flexDirection:"column"},className:"jsx-d08a2d59e2d19d47",children:[(0,t.jsxs)("div",{style:{padding:"24px",borderBottom:"1px solid #e2e8f0",display:"flex",alignItems:"center",justifyContent:"space-between"},className:"jsx-d08a2d59e2d19d47",children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},className:"jsx-d08a2d59e2d19d47",children:[(0,t.jsx)("div",{style:{width:"48px",height:"48px",backgroundColor:"rgba(99, 102, 241, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},className:"jsx-d08a2d59e2d19d47",children:(0,t.jsx)(A,{style:{width:"24px",height:"24px",color:"#6366f1"}})}),(0,t.jsxs)("div",{className:"jsx-d08a2d59e2d19d47",children:[(0,t.jsx)("h2",{style:{fontSize:"18px",fontWeight:700,color:"#0f172a",margin:0},className:"jsx-d08a2d59e2d19d47",children:"Ø³Ø¬Ù„ Ø§Ù„Ø­Ø±ÙƒØ§Øª"}),(0,t.jsx)("p",{style:{fontSize:"13px",color:"#64748b",marginTop:"2px"},className:"jsx-d08a2d59e2d19d47",children:e.name})]})]}),(0,t.jsx)("button",{onClick:a,style:{width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f1f5f9",border:"none",borderRadius:"10px",cursor:"pointer",color:"#64748b"},className:"jsx-d08a2d59e2d19d47",children:(0,t.jsx)(Q.X,{style:{width:"18px",height:"18px"}})})]}),(0,t.jsxs)("div",{style:{padding:"16px 24px",borderBottom:"1px solid #e2e8f0",display:"flex",flexWrap:"wrap",gap:"12px",alignItems:"center"},className:"jsx-d08a2d59e2d19d47",children:[(0,t.jsx)("div",{style:{display:"flex",gap:"8px"},className:"jsx-d08a2d59e2d19d47",children:[{value:"today",label:"Ø§Ù„ÙŠÙˆÙ…"},{value:"week",label:"Ø£Ø³Ø¨ÙˆØ¹"},{value:"month",label:"Ø´Ù‡Ø±"},{value:"custom",label:"Ù…Ø®ØµØµ"}].map(e=>(0,t.jsx)("button",{onClick:()=>c(e.value),style:{padding:"8px 16px",backgroundColor:n===e.value?"#6366f1":"#f1f5f9",border:"none",borderRadius:"8px",fontSize:"13px",fontWeight:600,color:n===e.value?"#ffffff":"#475569",cursor:"pointer"},className:"jsx-d08a2d59e2d19d47",children:e.label},e.value))}),"custom"===n&&(0,t.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center"},className:"jsx-d08a2d59e2d19d47",children:[(0,t.jsx)("input",{type:"date",value:p,onChange:e=>x(e.target.value),style:{padding:"8px 12px",backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"13px"},className:"jsx-d08a2d59e2d19d47"}),(0,t.jsx)("span",{style:{color:"#94a3b8"},className:"jsx-d08a2d59e2d19d47",children:"Ø¥Ù„Ù‰"}),(0,t.jsx)("input",{type:"date",value:f,onChange:e=>u(e.target.value),style:{padding:"8px 12px",backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"13px"},className:"jsx-d08a2d59e2d19d47"})]})]}),(0,t.jsx)("div",{style:{flex:1,overflowY:"auto",padding:"16px 24px"},className:"jsx-d08a2d59e2d19d47",children:l?(0,t.jsxs)("div",{style:{textAlign:"center",padding:"40px"},className:"jsx-d08a2d59e2d19d47",children:[(0,t.jsx)("div",{style:{width:"40px",height:"40px",border:"3px solid #e2e8f0",borderTopColor:"#6366f1",borderRadius:"50%",animation:"spin 0.8s linear infinite",margin:"0 auto 16px"},className:"jsx-d08a2d59e2d19d47"}),(0,t.jsx)("p",{style:{fontSize:"14px",color:"#64748b"},className:"jsx-d08a2d59e2d19d47",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„..."})]}):0===r.length?(0,t.jsxs)("div",{style:{textAlign:"center",padding:"60px 20px"},className:"jsx-d08a2d59e2d19d47",children:[(0,t.jsx)(A,{style:{width:"48px",height:"48px",color:"#cbd5e1",margin:"0 auto 16px"}}),(0,t.jsx)("p",{style:{fontSize:"16px",color:"#64748b",marginBottom:"4px"},className:"jsx-d08a2d59e2d19d47",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø±ÙƒØ§Øª"}),(0,t.jsx)("p",{style:{fontSize:"13px",color:"#94a3b8"},className:"jsx-d08a2d59e2d19d47",children:"Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø£ÙŠ Ø­Ø±ÙƒØ§Øª Ù…Ø®Ø²ÙˆÙ† ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ±Ø©"})]}):(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},className:"jsx-d08a2d59e2d19d47",children:r.map(e=>{let o=(e=>{switch(e){case"in":return{icon:k.TrendingUp,color:"#22c55e",bgColor:"rgba(34, 197, 94, 0.1)",label:"ÙˆØ§Ø±Ø¯"};case"out":return{icon:v.TrendingDown,color:"#ef4444",bgColor:"rgba(239, 68, 68, 0.1)",label:"ØµØ§Ø¯Ø±"};case"adjust":return{icon:B.Edit,color:"#6366f1",bgColor:"rgba(99, 102, 241, 0.1)",label:"ØªØ¹Ø¯ÙŠÙ„"};default:return{icon:A,color:"#64748b",bgColor:"#f1f5f9",label:"Ø­Ø±ÙƒØ©"}}})(e.type),s=o.icon;return(0,t.jsxs)("div",{style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},className:"jsx-d08a2d59e2d19d47",children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"12px"},className:"jsx-d08a2d59e2d19d47",children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},className:"jsx-d08a2d59e2d19d47",children:[(0,t.jsx)("div",{style:{width:"40px",height:"40px",backgroundColor:o.bgColor,borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center"},className:"jsx-d08a2d59e2d19d47",children:(0,t.jsx)(s,{style:{width:"20px",height:"20px",color:o.color},className:"jsx-d08a2d59e2d19d47"})}),(0,t.jsxs)("div",{className:"jsx-d08a2d59e2d19d47",children:[(0,t.jsx)("span",{style:{display:"inline-block",padding:"4px 10px",backgroundColor:o.bgColor,borderRadius:"6px",fontSize:"12px",fontWeight:600,color:o.color,marginBottom:"4px"},className:"jsx-d08a2d59e2d19d47",children:o.label}),(0,t.jsx)("p",{style:{fontSize:"14px",color:"#0f172a",fontWeight:600},className:"jsx-d08a2d59e2d19d47",children:e.reason||"Ø¨Ø¯ÙˆÙ† Ø³Ø¨Ø¨"})]})]}),(0,t.jsxs)("div",{style:{textAlign:"left",padding:"8px 12px",backgroundColor:"#ffffff",borderRadius:"8px"},className:"jsx-d08a2d59e2d19d47",children:[(0,t.jsxs)("p",{style:{fontSize:"18px",fontWeight:700,color:e.qtyChange>0?"#22c55e":e.qtyChange<0?"#ef4444":"#6366f1"},className:"jsx-d08a2d59e2d19d47",children:[e.qtyChange>0?"+":"",e.qtyChange]}),(0,t.jsxs)("p",{style:{fontSize:"11px",color:"#94a3b8"},className:"jsx-d08a2d59e2d19d47",children:[e.prevQty," â†’ ",e.newQty]})]})]}),(0,t.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"16px",fontSize:"12px",color:"#64748b"},className:"jsx-d08a2d59e2d19d47",children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px"},className:"jsx-d08a2d59e2d19d47",children:[(0,t.jsx)(_.Calendar,{style:{width:"14px",height:"14px"}}),new Date(e.createdAt).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),e.createdByName&&(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px"},className:"jsx-d08a2d59e2d19d47",children:[(0,t.jsx)(E.User,{style:{width:"14px",height:"14px"}}),e.createdByName]}),e.supplier&&(0,t.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"6px"},className:"jsx-d08a2d59e2d19d47",children:(0,t.jsxs)("span",{className:"jsx-d08a2d59e2d19d47",children:["Ø§Ù„Ù…ÙˆØ±Ø¯: ",e.supplier]})})]}),e.note&&(0,t.jsxs)("div",{style:{marginTop:"12px",padding:"10px 12px",backgroundColor:"#fef3c7",borderRadius:"8px",display:"flex",alignItems:"flex-start",gap:"8px"},className:"jsx-d08a2d59e2d19d47",children:[(0,t.jsx)(q.FileText,{style:{width:"14px",height:"14px",color:"#f59e0b",flexShrink:0,marginTop:"2px"}}),(0,t.jsx)("p",{style:{fontSize:"13px",color:"#92400e"},className:"jsx-d08a2d59e2d19d47",children:e.note})]})]},e.id)})})}),(0,t.jsx)("div",{style:{padding:"16px 24px",borderTop:"1px solid #e2e8f0",textAlign:"center"},className:"jsx-d08a2d59e2d19d47",children:(0,t.jsxs)("p",{style:{fontSize:"13px",color:"#94a3b8"},className:"jsx-d08a2d59e2d19d47",children:["Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø±ÙƒØ§Øª: ",r.length]})})]}),(0,t.jsx)(o.default,{id:"d08a2d59e2d19d47",children:"@keyframes spin{to{transform:rotate(360deg)}}"})]})}var P=e.i(16715),F=e.i(63209);function L(){let{user:e}=(0,a.useAuth)(),[r,i]=(0,s.useState)([]),[l,g]=(0,s.useState)([]),[u,h]=(0,s.useState)({totalProducts:0,totalInStock:0,lowStockCount:0,outOfStockCount:0,totalStockValue:0,todayMovementsIn:0,todayMovementsOut:0}),[m,j]=(0,s.useState)(!0),[k,v]=(0,s.useState)(!1),[C,w]=(0,s.useState)(null),[z,N]=(0,s.useState)(null),[I,R]=(0,s.useState)(!1),[B,T]=(0,s.useState)(null),A=async(e=!1)=>{e?v(!0):j(!0);try{let[e,t,o]=await Promise.all([n(),(0,b.getCategories)(),c()]),s=e.map(e=>({...e,categoryName:t.find(t=>t.id===e.categoryId)?.name||e.category}));i(s),g(t),h(o)}catch(e){console.error("Error loading inventory:",e),M("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª","error")}finally{j(!1),v(!1)}};(0,s.useEffect)(()=>{A()},[]);let M=(e,t)=>{T({message:e,type:t}),setTimeout(()=>T(null),3e3)},D=()=>{w(null),N(null)},Q=async t=>{if(z&&e){R(!0);try{switch(C){case"add":await p(z.id,t.quantity,e.id,e.name,t.note,t.supplier),M(`ØªÙ… Ø¥Ø¶Ø§ÙØ© ${t.quantity} ÙˆØ­Ø¯Ø© Ø¨Ù†Ø¬Ø§Ø­`,"success");break;case"remove":await x(z.id,t.quantity,t.reason||"",e.id,e.name,t.note),M(`ØªÙ… Ø³Ø­Ø¨ ${t.quantity} ÙˆØ­Ø¯Ø© Ø¨Ù†Ø¬Ø§Ø­`,"success");break;case"adjust":await f(z.id,t.quantity,t.reason||"",e.id,e.name,t.note),M("ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙƒÙ…ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­","success")}D(),await A(!0)}catch(e){console.error("Stock operation error:",e),M(e.message||"Ø­Ø¯Ø« Ø®Ø·Ø£","error")}finally{R(!1)}}};return(0,t.jsxs)("div",{style:{padding:"0",minHeight:"calc(100vh - 120px)"},className:"jsx-67dbc8976d6a3be5",children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},className:"jsx-67dbc8976d6a3be5",children:[(0,t.jsxs)("div",{className:"jsx-67dbc8976d6a3be5",children:[(0,t.jsxs)("h1",{style:{fontSize:"24px",fontWeight:700,color:"#0f172a",margin:0,display:"flex",alignItems:"center",gap:"12px"},className:"jsx-67dbc8976d6a3be5",children:[(0,t.jsx)(y.Package,{style:{width:"28px",height:"28px",color:"#6366f1"}}),"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†"]}),(0,t.jsx)("p",{style:{fontSize:"14px",color:"#64748b",marginTop:"4px"},className:"jsx-67dbc8976d6a3be5",children:"ØªØªØ¨Ø¹ ÙˆØ¥Ø¯Ø§Ø±Ø© Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª"})]}),(0,t.jsxs)("button",{onClick:()=>A(!0),disabled:k,style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 20px",backgroundColor:"#ffffff",border:"1px solid #e2e8f0",borderRadius:"10px",fontSize:"14px",fontWeight:500,color:"#475569",cursor:k?"not-allowed":"pointer"},className:"jsx-67dbc8976d6a3be5",children:[(0,t.jsx)(P.RefreshCw,{style:{width:"18px",height:"18px",animation:k?"spin 1s linear infinite":"none"}}),"ØªØ­Ø¯ÙŠØ«"]})]}),(0,t.jsx)(S,{stats:u,loading:m}),(0,t.jsx)(O,{products:r,categories:l.map(e=>({id:e.id,name:e.name})),loading:m,onAddStock:e=>{N(e),w("add")},onRemoveStock:e=>{N(e),w("remove")},onAdjustStock:e=>{N(e),w("adjust")},onViewHistory:e=>{N(e),w("history")},onExport:()=>{let e,t,o=["Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬,Ø§Ù„ØªØµÙ†ÙŠÙ,SKU,Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯,Ø§Ù„ÙƒÙ…ÙŠØ©,Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰,Ø§Ù„ØªÙƒÙ„ÙØ©,Ø§Ù„Ø³Ø¹Ø±,Ø§Ù„Ø­Ø§Ù„Ø©",...r.map(e=>[e.name,e.categoryName||e.category,e.sku||"",e.barcode||"",e.stockQty.toString(),e.minStock.toString(),e.cost?.toString()||"",e.price.toString(),"out_of_stock"===d(e)?"Ù†ÙØ¯":"low_stock"===d(e)?"Ù…Ù†Ø®ÙØ¶":"Ù…ØªÙˆÙØ±"]).map(e=>e.map(e=>`"${e}"`).join(","))].join("\n"),s=`inventory_${new Date().toISOString().split("T")[0]}.csv`;e=new Blob(["\uFEFF"+o],{type:"text/csv;charset=utf-8;"}),(t=document.createElement("a")).href=URL.createObjectURL(e),t.download=s,t.click(),M("ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­","success")}}),("add"===C||"remove"===C||"adjust"===C)&&z&&(0,t.jsx)(U,{type:C,product:z,onClose:D,onConfirm:Q,loading:I}),"history"===C&&z&&(0,t.jsx)($,{product:z,onClose:D}),B&&(0,t.jsxs)("div",{style:{position:"fixed",bottom:"24px",left:"50%",transform:"translateX(-50%)",display:"flex",alignItems:"center",gap:"10px",padding:"14px 24px",backgroundColor:"success"===B.type?"#22c55e":"#ef4444",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:200,animation:"slideUp 0.3s ease-out"},className:"jsx-67dbc8976d6a3be5",children:["success"===B.type?(0,t.jsx)(W.CheckCircle,{style:{width:"20px",height:"20px",color:"#ffffff"}}):(0,t.jsx)(F.AlertCircle,{style:{width:"20px",height:"20px",color:"#ffffff"}}),(0,t.jsx)("span",{style:{fontSize:"14px",fontWeight:600,color:"#ffffff"},className:"jsx-67dbc8976d6a3be5",children:B.message})]}),(0,t.jsx)(o.default,{id:"67dbc8976d6a3be5",children:"@keyframes spin{to{transform:rotate(360deg)}}@keyframes slideUp{0%{opacity:0;transform:translate(-50%)translateY(20px)}to{opacity:1;transform:translate(-50%)translateY(0)}}"})]})}e.s(["default",()=>L],82126)}]);