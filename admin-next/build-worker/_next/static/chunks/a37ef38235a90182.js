(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,86536,e=>{"use strict";let t=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],86536)},73884,e=>{"use strict";let t=(0,e.i(75254).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],73884)},12426,e=>{"use strict";let t=(0,e.i(75254).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>t],12426)},61659,e=>{"use strict";let t=(0,e.i(75254).default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);e.s(["CreditCard",()=>t],61659)},3116,e=>{"use strict";let t=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],3116)},69638,e=>{"use strict";let t=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},84103,e=>{"use strict";var t=e.i(33842);e.i(1465);var r=e.i(34991);let a=e=>`restaurant-system/${e}/${t.RESTAURANT_ID}`,s=async e=>{let s=Object.entries((await (0,r.get)((0,r.ref)(t.database,a("orders")))).val()||{}).map(([e,t])=>({id:e,...t}));return s.sort((e,t)=>{let r=e.timestamp||new Date(e.createdAt).getTime();return(t.timestamp||new Date(t.createdAt).getTime())-r}),e&&e>0&&(s=s.slice(0,e)),s},i=async(e,s)=>{let i=(await (0,r.get)((0,r.ref)(t.database,a("orders")))).val()||{},o=e.start.getTime(),n=e.end.getTime(),l=Object.entries(i).map(([e,t])=>({id:e,...t})).filter(e=>{let t=e.timestamp||new Date(e.createdAt).getTime();return t>=o&&t<=n}).sort((e,t)=>{let r=e.timestamp||new Date(e.createdAt).getTime();return(t.timestamp||new Date(t.createdAt).getTime())-r});return s&&s>0&&(l=l.slice(0,s)),l},o=async e=>{let s=await (0,r.get)((0,r.ref)(t.database,`${a("orders")}/${e}`));return s.exists()?{id:e,...s.val()}:null},n=async(e,s)=>{await (0,r.update)((0,r.ref)(t.database,`${a("orders")}/${e}`),{status:s,updatedAt:new Date().toISOString()})},l=async e=>{let s=(0,r.push)((0,r.ref)(t.database,a("orders"))),i=e.items.map(e=>{let t={id:e.id,name:e.name,price:e.price||0,quantity:e.quantity,itemTotal:e.itemTotal||e.price*e.quantity};return e.emoji&&(t.emoji=e.emoji),e.note&&(t.note=e.note),t}),o={items:i,total:e.total||0,status:e.status||"pending",restaurantId:t.RESTAURANT_ID,createdAt:new Date().toISOString(),timestamp:Date.now(),itemsCount:i.reduce((e,t)=>e+t.quantity,0)};void 0!==e.subtotal&&(o.subtotal=e.subtotal),e.discount&&(o.discount=e.discount),e.paymentMethod&&(o.paymentMethod=e.paymentMethod),e.paymentStatus&&(o.paymentStatus=e.paymentStatus),e.customerName&&(o.customerName=e.customerName),e.tableNumber&&(o.tableNumber=e.tableNumber),e.tableId&&(o.tableId=e.tableId),e.roomId&&(o.roomId=e.roomId),e.roomNumber&&(o.roomNumber=e.roomNumber),e.orderType&&(o.orderType=e.orderType),e.workerId&&(o.workerId=e.workerId),e.workerName&&(o.workerName=e.workerName),e.source&&(o.source=e.source);let n=null;if(e.tableNumber&&!e.tableId){let t=await _(e.tableNumber);t&&(n=t.id,o.tableId=t.id,o.orderType="table")}else e.tableId&&(n=e.tableId);await (0,r.set)(s,o);let l=s.key;if(n)try{await A(n,"occupied",l)}catch(e){console.error("Failed to update table status:",e)}return l},d=async()=>Object.entries((await (0,r.get)((0,r.ref)(t.database,a("menu")))).val()||{}).map(([e,t])=>{let r={id:e,...t,price:"string"==typeof t.price?parseFloat(t.price)||0:t.price||0,basePrice:t.basePrice?"string"==typeof t.basePrice?parseFloat(t.basePrice):t.basePrice:void 0};if(r.variations&&Array.isArray(r.variations)&&(r.variations=r.variations.map(e=>({...e,price:"string"==typeof e.price?parseFloat(e.price)||0:e.price||0}))),r.sizes&&"object"==typeof r.sizes){let e={};Object.entries(r.sizes).forEach(([t,r])=>{e[t]={...r,price:"string"==typeof r.price?parseFloat(r.price)||0:r.price||0}}),r.sizes=e}if(r.shishaTypes&&"object"==typeof r.shishaTypes){let e={};Object.entries(r.shishaTypes).forEach(([t,r])=>{e[t]={...r,price:"string"==typeof r.price?parseFloat(r.price)||0:r.price||0}}),r.shishaTypes=e}return r}),c=async e=>{let s=(0,r.push)((0,r.ref)(t.database,a("menu"))),i={};return Object.entries(e).forEach(([e,t])=>{if(void 0!==t)if("price"===e||"basePrice"===e)i[e]="string"==typeof t?parseFloat(t)||0:t||0;else if("variations"===e&&Array.isArray(t))i[e]=t.map(e=>({...e,price:"string"==typeof e.price?parseFloat(e.price)||0:e.price||0}));else if("sizes"===e&&"object"==typeof t){let r={};Object.entries(t).forEach(([e,t])=>{r[e]={...t,price:"string"==typeof t.price?parseFloat(t.price)||0:t.price||0}}),i[e]=r}else if("shishaTypes"===e&&"object"==typeof t){let r={};Object.entries(t).forEach(([e,t])=>{r[e]={...t,price:"string"==typeof t.price?parseFloat(t.price)||0:t.price||0}}),i[e]=r}else i[e]=t}),await (0,r.set)(s,{...i,category:e.categoryId||e.category,categoryId:e.categoryId||e.category,active:e.isActive??e.active??!0,isActive:e.isActive??e.active??!0,createdAt:new Date().toISOString()}),s.key},p=async(e,s)=>{let i={updatedAt:new Date().toISOString()};Object.entries(s).forEach(([e,t])=>{if(void 0!==t)if("price"===e||"basePrice"===e)i[e]="string"==typeof t?parseFloat(t)||0:t||0;else if("variations"===e&&Array.isArray(t))i[e]=t.map(e=>({...e,price:"string"==typeof e.price?parseFloat(e.price)||0:e.price||0}));else if("sizes"===e&&"object"==typeof t){let r={};Object.entries(t).forEach(([e,t])=>{r[e]={...t,price:"string"==typeof t.price?parseFloat(t.price)||0:t.price||0}}),i[e]=r}else if("shishaTypes"===e&&"object"==typeof t){let r={};Object.entries(t).forEach(([e,t])=>{r[e]={...t,price:"string"==typeof t.price?parseFloat(t.price)||0:t.price||0}}),i[e]=r}else i[e]=t}),s.categoryId&&(i.category=s.categoryId),void 0!==s.isActive&&(i.active=s.isActive),await (0,r.update)((0,r.ref)(t.database,`${a("menu")}/${e}`),i)},u=async e=>{await (0,r.remove)((0,r.ref)(t.database,`${a("menu")}/${e}`))},f=async()=>Object.entries((await (0,r.get)((0,r.ref)(t.database,a("categories")))).val()||{}).map(([e,t])=>({id:e,...t})).sort((e,t)=>(e.order||e.sortOrder||0)-(t.order||t.sortOrder||0)),b=async e=>{let s=(0,r.push)((0,r.ref)(t.database,a("categories"))),i={};return Object.entries(e).forEach(([e,t])=>{void 0!==t&&(i[e]=t)}),await (0,r.set)(s,{...i,createdAt:new Date().toISOString()}),s.key},x=async(e,s)=>{let i={};Object.entries(s).forEach(([e,t])=>{void 0!==t&&(i[e]=t)}),await (0,r.update)((0,r.ref)(t.database,`${a("categories")}/${e}`),{...i,updatedAt:new Date().toISOString()})},m=async e=>{await (0,r.remove)((0,r.ref)(t.database,`${a("categories")}/${e}`))},h=async e=>(await d()).filter(t=>t.category===e||t.categoryId===e),y=async e=>(await h(e)).length,g=async(e,s)=>{let i=await h(e),o={};i.forEach(e=>{o[`${a("menu")}/${e.id}/category`]=s,o[`${a("menu")}/${e.id}/categoryId`]=s,o[`${a("menu")}/${e.id}/updatedAt`]=new Date().toISOString()}),Object.keys(o).length>0&&await (0,r.update)((0,r.ref)(t.database),o)},j=async()=>Object.entries((await (0,r.get)((0,r.ref)(t.database,a("workers")))).val()||{}).map(([e,t])=>({id:e,...t})),v=async(e,s)=>{await (0,r.update)((0,r.ref)(t.database,`${a("workers")}/${e}`),{detailedPermissions:s})},S=async()=>{let e=new Date;e.setHours(0,0,0,0);let t=e.getTime();return(await s()).filter(e=>(e.timestamp||(e.createdAt?new Date(e.createdAt).getTime():0))>=t&&"cancelled"!==e.status)},w=async(e,s)=>{let i={paymentStatus:s,updatedAt:new Date().toISOString()};"paid"===s&&(i.paidAt=new Date().toISOString()),await (0,r.update)((0,r.ref)(t.database,`${a("orders")}/${e}`),i)},C=async(e,s)=>{let i=await o(e);if(!i)throw Error("Order not found");let n=[...i.items||[]];for(let e of s){let t=n.findIndex(t=>t.id===e.id&&t.name===e.name);if(t>=0)n[t].quantity+=e.quantity,n[t].itemTotal=n[t].quantity*n[t].price;else{let t={id:e.id,name:e.name,price:e.price||0,quantity:e.quantity,itemTotal:e.quantity*(e.price||0)};e.emoji&&(t.emoji=e.emoji),e.note&&(t.note=e.note),n.push(t)}}let l=n.map(e=>{let t={id:e.id,name:e.name,price:e.price||0,quantity:e.quantity,itemTotal:e.itemTotal||e.quantity*(e.price||0)};return e.emoji&&(t.emoji=e.emoji),e.note&&(t.note=e.note),t}),d=l.reduce((e,t)=>e+(t.itemTotal||t.quantity*t.price),0),c=l.reduce((e,t)=>e+t.quantity,0);await (0,r.update)((0,r.ref)(t.database,`${a("orders")}/${e}`),{items:l,total:d,itemsCount:c,updatedAt:new Date().toISOString()})},k=async(e,t)=>{let r=(await s()).filter(e=>"cancelled"!==e.status);if(e&&t){let a=e.getTime(),s=t.getTime();r=r.filter(e=>{let t=e.timestamp||(e.createdAt?new Date(e.createdAt).getTime():0);return t>=a&&t<=s})}let a=r.filter(e=>"paid"===e.status||"completed"===e.status).reduce((e,t)=>e+(t.total||0),0),i=r.length,o=r.filter(e=>"paid"===e.status||"completed"===e.status).length;return{totalRevenue:a,ordersCount:i,paidOrders:o,itemsSold:r.reduce((e,t)=>e+(t.itemsCount||t.items?.length||0),0),averageOrder:i>0?a/o:0}},N=async()=>Object.entries((await (0,r.get)((0,r.ref)(t.database,a("tables")))).val()||{}).map(([e,t])=>({id:e,...t})),R=async(e,t)=>!(await N()).some(r=>r.tableNumber===e&&r.id!==t),_=async e=>{let t=await N(),r=e.trim().toLowerCase(),a=e=>{let t=e.match(/\d+/);return t?t[0]:e},s=a(r),i=t.find(t=>t.tableNumber===e);return i||(i=t.find(e=>a(e.tableNumber.toLowerCase())===s))?i:(i=t.find(e=>e.tableNumber.toLowerCase().includes(r)||r.includes(e.tableNumber.toLowerCase())))||null},z=async e=>{if(!await R(e.tableNumber))throw Error(`رقم الطاولة "${e.tableNumber}" موجود مسبقاً`);let s={tableNumber:e.tableNumber,area:e.area,status:e.status||"available",activeOrderId:null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};e.name&&e.name.trim()&&(s.name=e.name.trim());let i=(0,r.push)((0,r.ref)(t.database,a("tables")));return await (0,r.set)(i,s),i.key},I=async(e,s)=>{if(s.tableNumber&&!await R(s.tableNumber,e))throw Error(`رقم الطاولة "${s.tableNumber}" موجود مسبقاً`);let i={updatedAt:new Date().toISOString()};void 0!==s.tableNumber&&(i.tableNumber=s.tableNumber),void 0!==s.area&&(i.area=s.area),void 0!==s.status&&(i.status=s.status),void 0!==s.activeOrderId&&(i.activeOrderId=s.activeOrderId),void 0!==s.reservedBy&&(i.reservedBy=s.reservedBy),void 0!==s.reservedAt&&(i.reservedAt=s.reservedAt),void 0!==s.name&&(s.name&&s.name.trim()?i.name=s.name.trim():i.name=null),await (0,r.update)((0,r.ref)(t.database,`${a("tables")}/${e}`),i)},A=async(e,s,i,o)=>{let n={status:s,updatedAt:new Date().toISOString()};"available"===s?(n.activeOrderId=null,n.reservedBy=null,n.reservedAt=null):"reserved"===s?(n.reservedBy=o||null,n.reservedAt=new Date().toISOString()):"occupied"===s&&i&&(n.activeOrderId=i),await (0,r.update)((0,r.ref)(t.database,`${a("tables")}/${e}`),n)},T=async()=>Object.entries((await (0,r.get)((0,r.ref)(t.database,a("rooms")))).val()||{}).map(([e,t])=>({id:e,...t})).sort((e,t)=>(parseInt(String(e.roomNumber))||0)-(parseInt(String(t.roomNumber))||0)),O=async e=>{let s=(0,r.push)((0,r.ref)(t.database,a("rooms"))),i={roomNumber:e.roomNumber,status:e.status||"available",isActive:e.isActive??!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return e.name&&(i.name=e.name),e.notes&&(i.notes=e.notes),void 0!==e.hourlyRate&&e.hourlyRate>0&&(i.hourlyRate=e.hourlyRate),e.priceType&&(i.priceType=e.priceType),void 0!==e.malePrice&&(i.malePrice=e.malePrice),void 0!==e.femalePrice&&(i.femalePrice=e.femalePrice),await (0,r.set)(s,i),s.key},F=async(e,s)=>{let i={updatedAt:new Date().toISOString()};Object.entries(s).forEach(([e,t])=>{void 0!==t&&(i[e]=t)}),await (0,r.update)((0,r.ref)(t.database,`${a("rooms")}/${e}`),i)},D=async e=>{await (0,r.remove)((0,r.ref)(t.database,`${a("rooms")}/${e}`))},E=async(e,s,i,o)=>{let n={status:s,updatedAt:new Date().toISOString()};"available"===s?(n.activeOrderId=null,n.reservedBy=null,n.reservedAt=null):"reserved"===s?(n.reservedBy=o||null,n.reservedAt=new Date().toISOString()):"occupied"===s&&i&&(n.activeOrderId=i),await (0,r.update)((0,r.ref)(t.database,`${a("rooms")}/${e}`),n)},P=async()=>(await s()).filter(e=>"room"===e.orderType||e.roomId).sort((e,t)=>{let r=e.timestamp||(e.createdAt?new Date(e.createdAt).getTime():0);return(t.timestamp||(t.createdAt?new Date(t.createdAt).getTime():0))-r}),$=async e=>(await P()).filter(t=>{let r=t.timestamp||(t.createdAt?new Date(t.createdAt).getTime():0);return r>=e.start.getTime()&&r<=e.end.getTime()}),W=async(e,t)=>{await n(e,"completed"),await w(e,"paid"),await E(t,"available")};e.s(["addItemsToOrder",0,C,"closeRoomOrder",0,W,"createCategory",0,b,"createOrder",0,l,"createProduct",0,c,"createRoom",0,O,"createTable",0,z,"deleteCategory",0,m,"deleteProduct",0,u,"deleteRoom",0,D,"getCategories",0,f,"getCategoryProductCount",0,y,"getDateRangeForFilter",0,(e,t,r)=>{let a=new Date,s=new Date(a);s.setHours(23,59,59,999);let i=new Date(a);switch(i.setHours(0,0,0,0),e){case"today":break;case"week":i.setDate(i.getDate()-7);break;case"month":i.setMonth(i.getMonth()-1);break;case"year":i.setFullYear(i.getFullYear()-1);break;case"custom":t&&(i=new Date(t)),r&&(s.setTime(new Date(r).getTime()),s.setHours(23,59,59,999))}return{start:i,end:s}},"getDefaultWorkerPermissions",0,()=>({modules:{staffMenu:!0,orders:!1,tables:!1,rooms:!1,cashier:!1,inventory:!1,reports:!1,products:!1},actions:{createOrder:!0,editOrder:!1,cancelOrder:!1,processPayment:!1,applyDiscount:!1,viewFinancials:!1,manageProducts:!1,manageTables:!1,manageRooms:!1,dailyClosing:!1}}),"getFullPermissions",0,()=>({modules:{staffMenu:!0,orders:!0,tables:!0,rooms:!0,cashier:!0,inventory:!0,reports:!0,products:!0},actions:{createOrder:!0,editOrder:!0,cancelOrder:!0,processPayment:!0,applyDiscount:!0,viewFinancials:!0,manageProducts:!0,manageTables:!0,manageRooms:!0,dailyClosing:!0}}),"getOrder",0,o,"getOrders",0,s,"getOrdersByDateRange",0,i,"getProducts",0,d,"getRoomOrdersByDateRange",0,$,"getRooms",0,T,"getSalesStats",0,k,"getTables",0,N,"getTodayOrders",0,S,"getWorkers",0,j,"listenToOrders",0,e=>{let s=(0,r.ref)(t.database,a("orders")),i=(0,r.onValue)(s,t=>{e(Object.entries(t.val()||{}).map(([e,t])=>({id:e,...t})))});return()=>(0,r.off)(s,"value",i)},"listenToRooms",0,e=>{let s=(0,r.ref)(t.database,a("rooms")),i=(0,r.onValue)(s,t=>{e(Object.entries(t.val()||{}).map(([e,t])=>({id:e,...t})).sort((e,t)=>(parseInt(String(e.roomNumber))||0)-(parseInt(String(t.roomNumber))||0)))});return()=>(0,r.off)(s,"value",i)},"listenToTables",0,e=>{let s=(0,r.ref)(t.database,a("tables")),i=(0,r.onValue)(s,t=>{e(Object.entries(t.val()||{}).map(([e,t])=>({id:e,...t})))});return()=>(0,r.off)(s,"value",i)},"moveProductsToCategory",0,g,"setRoomStatus",0,E,"setTableStatus",0,A,"updateCategory",0,x,"updateOrderPaymentStatus",0,w,"updateOrderStatus",0,n,"updateProduct",0,p,"updateRoom",0,F,"updateTable",0,I,"updateWorkerPermissions",0,v])},16015,(e,t,r)=>{},98547,(e,t,r)=>{var a=e.i(47167);e.r(16015);var s=e.r(71645),i=s&&"object"==typeof s&&"default"in s?s:{default:s},o=void 0!==a.default&&a.default.env&&!0,n=function(e){return"[object String]"===Object.prototype.toString.call(e)},l=function(){function e(e){var t=void 0===e?{}:e,r=t.name,a=void 0===r?"stylesheet":r,s=t.optimizeForSpeed,i=void 0===s?o:s;d(n(a),"`name` must be a string"),this._name=a,this._deletedRulePlaceholder="#"+a+"-deleted-rule____{}",d("boolean"==typeof i,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=i,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var l="u">typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=l?l.getAttribute("content"):null}var t,r=e.prototype;return r.setOptimizeForSpeed=function(e){d("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),d(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},r.isOptimizeForSpeed=function(){return this._optimizeForSpeed},r.inject=function(){var e=this;if(d(!this._injected,"sheet already injected"),this._injected=!0,"u">typeof window&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(o||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,r){return"number"==typeof r?e._serverSheet.cssRules[r]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),r},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},r.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},r.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},r.insertRule=function(e,t){if(d(n(e),"`insertRule` accepts only strings"),"u"<typeof window)return"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++;if(this._optimizeForSpeed){var r=this.getSheet();"number"!=typeof t&&(t=r.cssRules.length);try{r.insertRule(e,t)}catch(t){return o||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var a=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,a))}return this._rulesCount++},r.replaceRule=function(e,t){if(this._optimizeForSpeed||"u"<typeof window){var r="u">typeof window?this.getSheet():this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!r.cssRules[e])return e;r.deleteRule(e);try{r.insertRule(t,e)}catch(a){o||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),r.insertRule(this._deletedRulePlaceholder,e)}}else{var a=this._tags[e];d(a,"old rule at index `"+e+"` not found"),a.textContent=t}return e},r.deleteRule=function(e){if("u"<typeof window)return void this._serverSheet.deleteRule(e);if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];d(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},r.flush=function(){this._injected=!1,this._rulesCount=0,"u">typeof window?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},r.cssRules=function(){var e=this;return"u"<typeof window?this._serverSheet.cssRules:this._tags.reduce(function(t,r){return r?t=t.concat(Array.prototype.map.call(e.getSheetForTag(r).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},r.makeStyleTag=function(e,t,r){t&&d(n(t),"makeStyleTag accepts only strings as second parameter");var a=document.createElement("style");this._nonce&&a.setAttribute("nonce",this._nonce),a.type="text/css",a.setAttribute("data-"+e,""),t&&a.appendChild(document.createTextNode(t));var s=document.head||document.getElementsByTagName("head")[0];return r?s.insertBefore(a,r):s.appendChild(a),a},t=[{key:"length",get:function(){return this._rulesCount}}],function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(e.prototype,t),e}();function d(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var c=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0},p={};function u(e,t){if(!t)return"jsx-"+e;var r=String(t),a=e+r;return p[a]||(p[a]="jsx-"+c(e+"-"+r)),p[a]}function f(e,t){"u"<typeof window&&(t=t.replace(/\/style/gi,"\\/style"));var r=e+t;return p[r]||(p[r]=t.replace(/__jsx-style-dynamic-selector/g,e)),p[r]}var b=function(){function e(e){var t=void 0===e?{}:e,r=t.styleSheet,a=void 0===r?null:r,s=t.optimizeForSpeed,i=void 0!==s&&s;this._sheet=a||new l({name:"styled-jsx",optimizeForSpeed:i}),this._sheet.inject(),a&&"boolean"==typeof i&&(this._sheet.setOptimizeForSpeed(i),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"u">typeof window&&!this._fromServer&&(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var r=this.getIdAndRules(e),a=r.styleId,s=r.rules;if(a in this._instancesCounts){this._instancesCounts[a]+=1;return}var i=s.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[a]=i,this._instancesCounts[a]=1},t.remove=function(e){var t=this,r=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(r in this._instancesCounts,"styleId: `"+r+"` not found"),this._instancesCounts[r]-=1,this._instancesCounts[r]<1){var a=this._fromServer&&this._fromServer[r];a?(a.parentNode.removeChild(a),delete this._fromServer[r]):(this._indices[r].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[r]),delete this._instancesCounts[r]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],r=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return r[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,r;return t=this.cssRules(),void 0===(r=e)&&(r={}),t.map(function(e){var t=e[0],a=e[1];return i.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:r.nonce?r.nonce:void 0,dangerouslySetInnerHTML:{__html:a}})})},t.getIdAndRules=function(e){var t=e.children,r=e.dynamic,a=e.id;if(r){var s=u(a,r);return{styleId:s,rules:Array.isArray(t)?t.map(function(e){return f(s,e)}):[f(s,t)]}}return{styleId:u(a),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),x=s.createContext(null);function m(){return new b}function h(){return s.useContext(x)}x.displayName="StyleSheetContext";var y=i.default.useInsertionEffect||i.default.useLayoutEffect,g="u">typeof window?m():void 0;function j(e){var t=g||h();return t&&("u"<typeof window?t.add(e):y(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)])),null}j.dynamic=function(e){return e.map(function(e){return u(e[0],e[1])}).join(" ")},r.StyleRegistry=function(e){var t=e.registry,r=e.children,a=s.useContext(x),o=s.useState(function(){return a||t||m()})[0];return i.default.createElement(x.Provider,{value:o},r)},r.createStyleRegistry=m,r.style=j,r.useStyleRegistry=h},37902,(e,t,r)=>{t.exports=e.r(98547).style},55436,e=>{"use strict";let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436)},3281,e=>{"use strict";let t=(0,e.i(75254).default)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);e.s(["Printer",()=>t],3281)},16715,e=>{"use strict";let t=(0,e.i(75254).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],16715)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},84614,e=>{"use strict";let t=(0,e.i(75254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],84614)},87378,e=>{"use strict";let t=(0,e.i(75254).default)("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);e.s(["Banknote",()=>t],87378)},46897,e=>{"use strict";let t=(0,e.i(75254).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],46897)},92325,63059,e=>{"use strict";var t=e.i(43476),r=e.i(37902),a=e.i(71645),s=e.i(37727),i=e.i(3116),o=e.i(84614),n=e.i(46897),l=e.i(50627),d=e.i(69638),c=e.i(73884),p=e.i(63209),u=e.i(3281),f=e.i(61659),b=e.i(87378),x=e.i(75787),m=e.i(96139);let h={pending:{label:"معلق",color:"#f59e0b",bgColor:"#fef3c7",icon:i.Clock},processing:{label:"قيد التنفيذ",color:"#3b82f6",bgColor:"#dbeafe",icon:p.AlertCircle},preparing:{label:"قيد التحضير",color:"#f59e0b",bgColor:"#fef3c7",icon:m.Coffee},ready:{label:"جاهز",color:"#06b6d4",bgColor:"#cffafe",icon:d.CheckCircle},paid:{label:"مدفوع",color:"#16a34a",bgColor:"#dcfce7",icon:d.CheckCircle},completed:{label:"مكتمل",color:"#16a34a",bgColor:"#dcfce7",icon:d.CheckCircle},cancelled:{label:"ملغي",color:"#dc2626",bgColor:"#fee2e2",icon:c.XCircle}};function y({order:e,isOpen:i=!0,onClose:d,onUpdateStatus:c}){let[p,m]=(0,a.useState)(!1);if(!i||!e)return null;let y=h[e.status]||h.pending,g=y.icon,j=async t=>{if(c){m(!0);try{await c(e.id,t)}catch(e){console.error("Error updating status:",e)}finally{m(!1)}}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{style:{position:"fixed",left:0,top:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:1e3},onClick:d,className:"jsx-ee6920d2b0e9eb2d"}),(0,t.jsxs)("div",{style:{position:"fixed",right:0,top:0,width:"450px",maxWidth:"95%",height:"100%",backgroundColor:"#ffffff",zIndex:1001,display:"flex",flexDirection:"column",boxShadow:"-4px 0 24px rgba(0, 0, 0, 0.15)",animation:"slideIn 0.3s ease-out"},className:"jsx-ee6920d2b0e9eb2d",children:[(0,t.jsxs)("div",{style:{padding:"20px 24px",borderBottom:"1px solid #e2e8f0",backgroundColor:"#f8fafc"},className:"jsx-ee6920d2b0e9eb2d",children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},className:"jsx-ee6920d2b0e9eb2d",children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},className:"jsx-ee6920d2b0e9eb2d",children:[(0,t.jsx)("div",{style:{width:"44px",height:"44px",borderRadius:"12px",background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",display:"flex",alignItems:"center",justifyContent:"center"},className:"jsx-ee6920d2b0e9eb2d",children:(0,t.jsx)(l.Receipt,{style:{width:"22px",height:"22px",color:"#ffffff"}})}),(0,t.jsxs)("div",{className:"jsx-ee6920d2b0e9eb2d",children:[(0,t.jsxs)("h2",{style:{fontSize:"18px",fontWeight:700,color:"#0f172a",margin:0},className:"jsx-ee6920d2b0e9eb2d",children:["فاتورة #",e.id.slice(-6).toUpperCase()]}),(0,t.jsx)("p",{style:{fontSize:"12px",color:"#64748b",margin:"2px 0 0 0"},className:"jsx-ee6920d2b0e9eb2d",children:(e=>{try{return new Date(e).toLocaleDateString("ar-OM",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return e}})(e.createdAt)})]})]}),(0,t.jsx)("button",{onClick:d,style:{width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f1f5f9",border:"none",borderRadius:"10px",cursor:"pointer",transition:"background-color 0.2s"},className:"jsx-ee6920d2b0e9eb2d",children:(0,t.jsx)(s.X,{style:{width:"20px",height:"20px",color:"#64748b"}})})]}),(0,t.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",backgroundColor:y.bgColor,borderRadius:"8px"},className:"jsx-ee6920d2b0e9eb2d",children:[(0,t.jsx)(g,{style:{width:"16px",height:"16px",color:y.color},className:"jsx-ee6920d2b0e9eb2d"}),(0,t.jsx)("span",{style:{fontSize:"13px",fontWeight:600,color:y.color},className:"jsx-ee6920d2b0e9eb2d",children:y.label})]})]}),(0,t.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:"20px 24px"},className:"jsx-ee6920d2b0e9eb2d",children:[(0,t.jsxs)("div",{style:{marginBottom:"24px"},className:"jsx-ee6920d2b0e9eb2d",children:[(0,t.jsx)("h3",{style:{fontSize:"13px",fontWeight:600,color:"#94a3b8",marginBottom:"12px",textTransform:"uppercase"},className:"jsx-ee6920d2b0e9eb2d",children:"معلومات الطلب"}),(0,t.jsxs)("div",{style:{backgroundColor:"#f8fafc",borderRadius:"12px",padding:"16px",display:"flex",flexDirection:"column",gap:"12px"},className:"jsx-ee6920d2b0e9eb2d",children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},className:"jsx-ee6920d2b0e9eb2d",children:[(0,t.jsx)(x.DoorOpen,{style:{width:"18px",height:"18px",color:"#64748b"}}),(0,t.jsxs)("span",{style:{fontSize:"14px",color:"#475569"},className:"jsx-ee6920d2b0e9eb2d",children:["table"===e.orderType?"طاولة":"room"===e.orderType?"غرفة":"استلام",e.tableNumber&&` رقم ${e.tableNumber}`,e.roomNumber&&` رقم ${e.roomNumber}`]})]}),e.customerName&&(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},className:"jsx-ee6920d2b0e9eb2d",children:[(0,t.jsx)(o.User,{style:{width:"18px",height:"18px",color:"#64748b"}}),(0,t.jsx)("span",{style:{fontSize:"14px",color:"#475569"},className:"jsx-ee6920d2b0e9eb2d",children:e.customerName})]}),e.workerName&&(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},className:"jsx-ee6920d2b0e9eb2d",children:[(0,t.jsx)(o.User,{style:{width:"18px",height:"18px",color:"#64748b"}}),(0,t.jsxs)("span",{style:{fontSize:"14px",color:"#475569"},className:"jsx-ee6920d2b0e9eb2d",children:["الموظف: ",e.workerName]})]}),e.source&&(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},className:"jsx-ee6920d2b0e9eb2d",children:[(0,t.jsx)(n.MapPin,{style:{width:"18px",height:"18px",color:"#64748b"}}),(0,t.jsxs)("span",{style:{fontSize:"14px",color:"#475569"},className:"jsx-ee6920d2b0e9eb2d",children:["المصدر: ","cashier"===e.source?"الكاشير":"staff-menu"===e.source?"منيو الموظفين":e.source]})]}),e.paymentMethod&&(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},className:"jsx-ee6920d2b0e9eb2d",children:["cash"===e.paymentMethod?(0,t.jsx)(b.Banknote,{style:{width:"18px",height:"18px",color:"#64748b"}}):(0,t.jsx)(f.CreditCard,{style:{width:"18px",height:"18px",color:"#64748b"}}),(0,t.jsx)("span",{style:{fontSize:"14px",color:"#475569"},className:"jsx-ee6920d2b0e9eb2d",children:"cash"===e.paymentMethod?"نقدي":"بطاقة"})]})]})]}),(0,t.jsxs)("div",{style:{marginBottom:"24px"},className:"jsx-ee6920d2b0e9eb2d",children:[(0,t.jsxs)("h3",{style:{fontSize:"13px",fontWeight:600,color:"#94a3b8",marginBottom:"12px",textTransform:"uppercase"},className:"jsx-ee6920d2b0e9eb2d",children:["العناصر (",e.items?.length||0,")"]}),(0,t.jsx)("div",{style:{backgroundColor:"#ffffff",borderRadius:"12px",border:"1px solid #e2e8f0",overflow:"hidden"},className:"jsx-ee6920d2b0e9eb2d",children:e.items?.map((r,a)=>(0,t.jsxs)("div",{style:{padding:"14px 16px",borderBottom:a<(e.items?.length||0)-1?"1px solid #f1f5f9":"none",display:"flex",justifyContent:"space-between",alignItems:"flex-start"},className:"jsx-ee6920d2b0e9eb2d",children:[(0,t.jsxs)("div",{style:{flex:1},className:"jsx-ee6920d2b0e9eb2d",children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},className:"jsx-ee6920d2b0e9eb2d",children:[r.emoji&&(0,t.jsx)("span",{style:{fontSize:"18px"},className:"jsx-ee6920d2b0e9eb2d",children:r.emoji}),(0,t.jsx)("span",{style:{fontSize:"14px",fontWeight:500,color:"#0f172a"},className:"jsx-ee6920d2b0e9eb2d",children:r.name})]}),(0,t.jsxs)("p",{style:{fontSize:"12px",color:"#64748b",margin:"4px 0 0 0"},className:"jsx-ee6920d2b0e9eb2d",children:[r.quantity," × ",(r.price||0).toFixed(3)," ر.ع"]}),r.note&&(0,t.jsxs)("p",{style:{fontSize:"11px",color:"#94a3b8",margin:"4px 0 0 0",fontStyle:"italic"},className:"jsx-ee6920d2b0e9eb2d",children:["ملاحظة: ",r.note]})]}),(0,t.jsxs)("span",{style:{fontSize:"14px",fontWeight:600,color:"#0f172a"},className:"jsx-ee6920d2b0e9eb2d",children:[(r.itemTotal||r.quantity*(r.price||0)).toFixed(3)," ر.ع"]})]},a))})]}),(0,t.jsxs)("div",{style:{backgroundColor:"#f8fafc",borderRadius:"12px",padding:"16px"},className:"jsx-ee6920d2b0e9eb2d",children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},className:"jsx-ee6920d2b0e9eb2d",children:[(0,t.jsx)("span",{style:{fontSize:"14px",color:"#64748b"},className:"jsx-ee6920d2b0e9eb2d",children:"المجموع الفرعي"}),(0,t.jsxs)("span",{style:{fontSize:"14px",color:"#475569"},className:"jsx-ee6920d2b0e9eb2d",children:[(e.subtotal||e.total||0).toFixed(3)," ر.ع"]})]}),e.discount&&e.discount.amount>0&&(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},className:"jsx-ee6920d2b0e9eb2d",children:[(0,t.jsxs)("span",{style:{fontSize:"14px",color:"#64748b"},className:"jsx-ee6920d2b0e9eb2d",children:["الخصم (",e.discount.percent,"%)"]}),(0,t.jsxs)("span",{style:{fontSize:"14px",color:"#dc2626"},className:"jsx-ee6920d2b0e9eb2d",children:["-",e.discount.amount.toFixed(3)," ر.ع"]})]}),(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"12px",borderTop:"1px dashed #e2e8f0",marginTop:"8px"},className:"jsx-ee6920d2b0e9eb2d",children:[(0,t.jsx)("span",{style:{fontSize:"16px",fontWeight:700,color:"#0f172a"},className:"jsx-ee6920d2b0e9eb2d",children:"الإجمالي"}),(0,t.jsxs)("span",{style:{fontSize:"20px",fontWeight:700,color:"#16a34a"},className:"jsx-ee6920d2b0e9eb2d",children:[(e.total||0).toFixed(3)," ر.ع"]})]})]})]}),(0,t.jsxs)("div",{style:{padding:"16px 24px",borderTop:"1px solid #e2e8f0",backgroundColor:"#f8fafc"},className:"jsx-ee6920d2b0e9eb2d",children:[c&&"completed"!==e.status&&"cancelled"!==e.status&&(0,t.jsxs)("div",{style:{display:"flex",gap:"10px",marginBottom:"12px"},className:"jsx-ee6920d2b0e9eb2d",children:["pending"===e.status&&(0,t.jsx)("button",{onClick:()=>j("preparing"),disabled:p,style:{flex:1,padding:"12px",backgroundColor:"#3b82f6",border:"none",borderRadius:"10px",fontSize:"13px",fontWeight:600,color:"#ffffff",cursor:"pointer",opacity:p?.7:1},className:"jsx-ee6920d2b0e9eb2d",children:"بدء التحضير"}),("preparing"===e.status||"processing"===e.status)&&(0,t.jsx)("button",{onClick:()=>j("ready"),disabled:p,style:{flex:1,padding:"12px",backgroundColor:"#06b6d4",border:"none",borderRadius:"10px",fontSize:"13px",fontWeight:600,color:"#ffffff",cursor:"pointer",opacity:p?.7:1},className:"jsx-ee6920d2b0e9eb2d",children:"جاهز للاستلام"}),"ready"===e.status&&(0,t.jsx)("button",{onClick:()=>j("completed"),disabled:p,style:{flex:1,padding:"12px",backgroundColor:"#16a34a",border:"none",borderRadius:"10px",fontSize:"13px",fontWeight:600,color:"#ffffff",cursor:"pointer",opacity:p?.7:1},className:"jsx-ee6920d2b0e9eb2d",children:"تم التسليم"}),(0,t.jsx)("button",{onClick:()=>j("cancelled"),disabled:p,style:{padding:"12px 16px",backgroundColor:"#fee2e2",border:"none",borderRadius:"10px",fontSize:"13px",fontWeight:600,color:"#dc2626",cursor:"pointer",opacity:p?.7:1},className:"jsx-ee6920d2b0e9eb2d",children:"إلغاء"})]}),(0,t.jsxs)("button",{onClick:()=>{window.print()},style:{width:"100%",padding:"12px",backgroundColor:"#f1f5f9",border:"1px solid #e2e8f0",borderRadius:"10px",fontSize:"13px",fontWeight:600,color:"#475569",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},className:"jsx-ee6920d2b0e9eb2d",children:[(0,t.jsx)(u.Printer,{style:{width:"18px",height:"18px"}}),"طباعة الفاتورة"]})]})]}),(0,t.jsx)(r.default,{id:"ee6920d2b0e9eb2d",children:"@keyframes slideIn{0%{transform:translate(100%)}to{transform:translate(0)}}"})]})}e.s(["default",()=>y],92325);let g=(0,e.i(75254).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>g],63059)},76664,e=>{"use strict";var t=e.i(43476),r=e.i(37902),a=e.i(71645),s=e.i(84103),i=e.i(55436),o=e.i(37727);let n=[{value:"today",label:"اليوم"},{value:"week",label:"هذا الأسبوع"},{value:"month",label:"هذا الشهر"},{value:"year",label:"هذه السنة"},{value:"custom",label:"تاريخ محدد"}],l=[{value:"all",label:"جميع الحالات"},{value:"pending",label:"معلق"},{value:"preparing",label:"قيد التحضير"},{value:"ready",label:"جاهز"},{value:"completed",label:"مكتمل"},{value:"paid",label:"مدفوع"},{value:"cancelled",label:"ملغي"}],d=[{value:"all",label:"الكل"},{value:"paid",label:"مدفوع"},{value:"pending",label:"غير مدفوع"}];function c({filters:e,onChange:r}){let[s,c]=(0,a.useState)("custom"===e.dateRange),p="all"!==e.status||"all"!==e.paymentStatus||""!==e.search||"custom"===e.dateRange;return(0,t.jsxs)("div",{style:{backgroundColor:"#ffffff",borderRadius:"16px",border:"1px solid #e2e8f0",padding:"20px",marginBottom:"20px"},children:[(0,t.jsx)("div",{style:{display:"flex",gap:"8px",marginBottom:"16px",flexWrap:"wrap"},children:n.map(a=>(0,t.jsx)("button",{onClick:()=>{var t;let s;c(s="custom"===(t=a.value)),r({...e,dateRange:t,customStart:s?e.customStart:void 0,customEnd:s?e.customEnd:void 0})},style:{padding:"8px 16px",borderRadius:"10px",border:"none",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.15s",backgroundColor:e.dateRange===a.value?"#6366f1":"#f1f5f9",color:e.dateRange===a.value?"#ffffff":"#475569"},children:a.label},a.value))}),s&&(0,t.jsxs)("div",{style:{display:"flex",gap:"12px",marginBottom:"16px",flexWrap:"wrap"},children:[(0,t.jsxs)("div",{style:{flex:1,minWidth:"150px"},children:[(0,t.jsx)("label",{style:{display:"block",fontSize:"12px",fontWeight:600,color:"#64748b",marginBottom:"6px"},children:"من تاريخ"}),(0,t.jsx)("input",{type:"date",value:e.customStart||"",onChange:t=>r({...e,customStart:t.target.value}),style:{width:"100%",padding:"10px 14px",fontSize:"14px",border:"1px solid #e2e8f0",borderRadius:"10px",outline:"none"}})]}),(0,t.jsxs)("div",{style:{flex:1,minWidth:"150px"},children:[(0,t.jsx)("label",{style:{display:"block",fontSize:"12px",fontWeight:600,color:"#64748b",marginBottom:"6px"},children:"إلى تاريخ"}),(0,t.jsx)("input",{type:"date",value:e.customEnd||"",onChange:t=>r({...e,customEnd:t.target.value}),style:{width:"100%",padding:"10px 14px",fontSize:"14px",border:"1px solid #e2e8f0",borderRadius:"10px",outline:"none"}})]})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"flex-end"},children:[(0,t.jsx)("div",{style:{flex:2,minWidth:"200px"},children:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"0 14px",height:"44px",backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"12px"},children:[(0,t.jsx)(i.Search,{style:{width:"18px",height:"18px",color:"#94a3b8"}}),(0,t.jsx)("input",{type:"text",value:e.search,onChange:t=>r({...e,search:t.target.value}),placeholder:"ابحث برقم الطلب أو اسم العميل...",style:{flex:1,border:"none",outline:"none",fontSize:"14px",color:"#0f172a",backgroundColor:"transparent"}}),e.search&&(0,t.jsx)("button",{onClick:()=>r({...e,search:""}),style:{padding:"4px",backgroundColor:"transparent",border:"none",cursor:"pointer",color:"#94a3b8"},children:(0,t.jsx)(o.X,{style:{width:"16px",height:"16px"}})})]})}),(0,t.jsx)("div",{style:{flex:1,minWidth:"150px"},children:(0,t.jsx)("select",{value:e.status,onChange:t=>r({...e,status:t.target.value}),style:{width:"100%",height:"44px",padding:"0 14px",backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"12px",fontSize:"14px",color:"#0f172a",cursor:"pointer",appearance:"none",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2394a3b8'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E\")",backgroundRepeat:"no-repeat",backgroundPosition:"left 12px center",backgroundSize:"16px"},children:l.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})}),(0,t.jsx)("div",{style:{flex:1,minWidth:"130px"},children:(0,t.jsx)("select",{value:e.paymentStatus,onChange:t=>r({...e,paymentStatus:t.target.value}),style:{width:"100%",height:"44px",padding:"0 14px",backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"12px",fontSize:"14px",color:"#0f172a",cursor:"pointer",appearance:"none",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2394a3b8'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E\")",backgroundRepeat:"no-repeat",backgroundPosition:"left 12px center",backgroundSize:"16px"},children:d.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})}),p&&(0,t.jsxs)("button",{onClick:()=>{r({dateRange:"today",status:"all",paymentStatus:"all",search:""}),c(!1)},style:{display:"flex",alignItems:"center",gap:"6px",padding:"0 16px",height:"44px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"12px",fontSize:"13px",fontWeight:600,color:"#dc2626",cursor:"pointer"},children:[(0,t.jsx)(o.X,{style:{width:"16px",height:"16px"}}),"مسح"]})]})]})}var p=e.i(1928),u=e.i(12426),f=e.i(61659),b=e.i(3116);function x({orders:e,dateRangeLabel:r}){let a=e.length,s=e.filter(e=>"cancelled"!==e.status).reduce((e,t)=>e+(t.total||0),0),i=e.filter(e=>"paid"===e.paymentStatus||"paid"===e.status).length,o=e.filter(e=>"paid"!==e.paymentStatus&&"paid"!==e.status&&"cancelled"!==e.status).length,n=e.filter(e=>"pending"===e.status).length;e.filter(e=>"completed"===e.status||"paid"===e.status).length;let l=[{title:"إجمالي الطلبات",value:a.toString(),subtitle:r,icon:p.ShoppingCart,color:"#6366f1",bg:"#eef2ff"},{title:"إجمالي المبيعات",value:`${s.toFixed(3)}`,subtitle:"ر.ع",icon:u.DollarSign,color:"#10b981",bg:"#dcfce7"},{title:"مدفوع",value:i.toString(),subtitle:`${o} غير مدفوع`,icon:f.CreditCard,color:"#10b981",bg:"#dcfce7"},{title:"معلق",value:n.toString(),subtitle:"في انتظار المعالجة",icon:b.Clock,color:"#f59e0b",bg:"#fef3c7"}];return(0,t.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"20px"},children:l.map((e,r)=>{let a=e.icon;return(0,t.jsxs)("div",{style:{backgroundColor:"#ffffff",borderRadius:"16px",border:"1px solid #e2e8f0",padding:"20px",display:"flex",alignItems:"flex-start",gap:"16px"},children:[(0,t.jsx)("div",{style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:e.bg,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:(0,t.jsx)(a,{style:{width:"24px",height:"24px",color:e.color}})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{style:{fontSize:"12px",color:"#64748b",marginBottom:"4px"},children:e.title}),(0,t.jsx)("p",{style:{fontSize:"24px",fontWeight:700,color:"#0f172a",margin:0},children:e.value}),(0,t.jsx)("p",{style:{fontSize:"12px",color:"#94a3b8",marginTop:"2px"},children:e.subtitle})]})]},r)})})}var m=e.i(92325),h=e.i(86536),y=e.i(73375),g=e.i(63059),j=e.i(16715);let v={pending:{label:"معلق",color:"#f59e0b",bg:"#fef3c7"},processing:{label:"قيد التنفيذ",color:"#3b82f6",bg:"#dbeafe"},preparing:{label:"قيد التحضير",color:"#f59e0b",bg:"#fef3c7"},ready:{label:"جاهز",color:"#06b6d4",bg:"#cffafe"},paid:{label:"مدفوع",color:"#10b981",bg:"#dcfce7"},completed:{label:"مكتمل",color:"#10b981",bg:"#dcfce7"},cancelled:{label:"ملغي",color:"#ef4444",bg:"#fee2e2"}},S={label:"غير مدفوع",color:"#f59e0b",bg:"#fef3c7"},w={label:"مدفوع",color:"#10b981",bg:"#dcfce7"},C={today:"اليوم",week:"هذا الأسبوع",month:"هذا الشهر",year:"هذه السنة",custom:"تاريخ محدد"};function k(){let[e,i]=(0,a.useState)([]),[o,n]=(0,a.useState)(!0),[l,d]=(0,a.useState)(!1),[p,u]=(0,a.useState)(null),[f,b]=(0,a.useState)(1),[k,N]=(0,a.useState)({dateRange:"today",status:"all",paymentStatus:"all",search:""}),R=async()=>{n(!0);try{let e=(0,s.getDateRangeForFilter)(k.dateRange,k.customStart,k.customEnd),t=await (0,s.getOrdersByDateRange)(e);i(t)}catch(e){console.error("Error loading orders:",e)}finally{n(!1)}},_=async()=>{d(!0),await R(),d(!1)};(0,a.useEffect)(()=>{R(),b(1)},[k.dateRange,k.customStart,k.customEnd]);let z=(0,a.useMemo)(()=>e.filter(e=>{if("all"!==k.status&&e.status!==k.status)return!1;if("all"!==k.paymentStatus){let t="paid"===e.paymentStatus||"paid"===e.status;if("paid"===k.paymentStatus&&!t||"pending"===k.paymentStatus&&t)return!1}if(k.search){let t=k.search.toLowerCase(),r=e.id.toLowerCase().includes(t),a=e.customerName?.toLowerCase().includes(t);if(!r&&!a)return!1}return!0}),[e,k.status,k.paymentStatus,k.search]),I=(0,a.useMemo)(()=>{let e=(f-1)*15;return z.slice(e,e+15)},[z,f]),A=Math.ceil(z.length/15),T=async(t,r)=>{try{if("paid"===r?(await (0,s.updateOrderPaymentStatus)(t,"paid"),await (0,s.updateOrderStatus)(t,"completed")):await (0,s.updateOrderStatus)(t,r),await R(),p?.id===t){let a=e.find(e=>e.id===t);a&&u({...a,status:r})}}catch(e){console.error("Error updating status:",e)}};return(0,t.jsxs)("div",{style:{padding:"24px"},className:"jsx-4b22437fb54054bc",children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},className:"jsx-4b22437fb54054bc",children:[(0,t.jsxs)("div",{className:"jsx-4b22437fb54054bc",children:[(0,t.jsx)("h1",{style:{fontSize:"24px",fontWeight:700,color:"#0f172a",margin:0},className:"jsx-4b22437fb54054bc",children:"الطلبات"}),(0,t.jsx)("p",{style:{fontSize:"14px",color:"#64748b",marginTop:"4px"},className:"jsx-4b22437fb54054bc",children:"إدارة ومتابعة جميع الطلبات"})]}),(0,t.jsxs)("button",{onClick:_,disabled:l,style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 20px",backgroundColor:"#f1f5f9",border:"1px solid #e2e8f0",borderRadius:"12px",fontSize:"14px",fontWeight:600,color:"#475569",cursor:l?"not-allowed":"pointer"},className:"jsx-4b22437fb54054bc",children:[(0,t.jsx)(j.RefreshCw,{style:{width:"18px",height:"18px",animation:l?"spin 1s linear infinite":"none"}}),"تحديث"]})]}),(0,t.jsx)(x,{orders:e,dateRangeLabel:C[k.dateRange]}),(0,t.jsx)(c,{filters:k,onChange:N}),(0,t.jsx)("div",{style:{backgroundColor:"#ffffff",borderRadius:"16px",border:"1px solid #e2e8f0",overflow:"hidden"},className:"jsx-4b22437fb54054bc",children:o?(0,t.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"60px",color:"#64748b"},className:"jsx-4b22437fb54054bc",children:(0,t.jsx)("div",{style:{width:"32px",height:"32px",border:"3px solid #e2e8f0",borderTopColor:"#6366f1",borderRadius:"50%",animation:"spin 1s linear infinite"},className:"jsx-4b22437fb54054bc"})}):0===I.length?(0,t.jsxs)("div",{style:{textAlign:"center",padding:"60px",color:"#64748b"},className:"jsx-4b22437fb54054bc",children:[(0,t.jsx)("p",{style:{fontSize:"16px",marginBottom:"8px"},className:"jsx-4b22437fb54054bc",children:"لا توجد طلبات"}),(0,t.jsx)("p",{style:{fontSize:"14px",color:"#94a3b8"},className:"jsx-4b22437fb54054bc",children:k.search||"all"!==k.status||"all"!==k.paymentStatus?"جرب تغيير الفلاتر":"لم يتم تسجيل أي طلبات في هذه الفترة"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"100px 140px 1fr 80px 100px 100px 100px 80px 80px",gap:"12px",padding:"14px 20px",backgroundColor:"#f8fafc",borderBottom:"1px solid #e2e8f0",fontSize:"12px",fontWeight:600,color:"#64748b"},className:"jsx-4b22437fb54054bc",children:[(0,t.jsx)("div",{className:"jsx-4b22437fb54054bc",children:"رقم الطلب"}),(0,t.jsx)("div",{className:"jsx-4b22437fb54054bc",children:"التاريخ/الوقت"}),(0,t.jsx)("div",{className:"jsx-4b22437fb54054bc",children:"العميل/الطاولة"}),(0,t.jsx)("div",{style:{textAlign:"center"},className:"jsx-4b22437fb54054bc",children:"العناصر"}),(0,t.jsx)("div",{style:{textAlign:"center"},className:"jsx-4b22437fb54054bc",children:"الإجمالي"}),(0,t.jsx)("div",{style:{textAlign:"center"},className:"jsx-4b22437fb54054bc",children:"الدفع"}),(0,t.jsx)("div",{style:{textAlign:"center"},className:"jsx-4b22437fb54054bc",children:"الحالة"}),(0,t.jsx)("div",{style:{textAlign:"center"},className:"jsx-4b22437fb54054bc",children:"المصدر"}),(0,t.jsx)("div",{style:{textAlign:"center"},className:"jsx-4b22437fb54054bc",children:"إجراءات"})]}),I.map(e=>{let r=v[e.status]||v.pending,a="paid"===e.paymentStatus||"paid"===e.status?w:S;return(0,t.jsxs)("div",{onClick:()=>u(e),style:{display:"grid",gridTemplateColumns:"100px 140px 1fr 80px 100px 100px 100px 80px 80px",gap:"12px",padding:"16px 20px",borderBottom:"1px solid #f1f5f9",alignItems:"center",cursor:"pointer",transition:"background-color 0.15s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#f8fafc",onMouseOut:e=>e.currentTarget.style.backgroundColor="transparent",className:"jsx-4b22437fb54054bc",children:[(0,t.jsx)("div",{className:"jsx-4b22437fb54054bc",children:(0,t.jsxs)("span",{style:{fontSize:"13px",fontWeight:700,color:"#6366f1",fontFamily:"monospace"},className:"jsx-4b22437fb54054bc",children:["#",e.id.slice(-6).toUpperCase()]})}),(0,t.jsxs)("div",{className:"jsx-4b22437fb54054bc",children:[(0,t.jsx)("p",{style:{fontSize:"13px",fontWeight:500,color:"#0f172a",margin:0},className:"jsx-4b22437fb54054bc",children:new Date(e.createdAt).toLocaleDateString("ar-EG",{month:"short",day:"numeric"})}),(0,t.jsx)("p",{style:{fontSize:"12px",color:"#94a3b8",margin:"2px 0 0 0"},className:"jsx-4b22437fb54054bc",children:new Date(e.createdAt).toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"})})]}),(0,t.jsxs)("div",{className:"jsx-4b22437fb54054bc",children:[(0,t.jsx)("p",{style:{fontSize:"13px",fontWeight:500,color:"#0f172a",margin:0},className:"jsx-4b22437fb54054bc",children:e.customerName||"عميل"}),(e.tableNumber||e.roomNumber)&&(0,t.jsx)("p",{style:{fontSize:"12px",color:"#94a3b8",margin:"2px 0 0 0"},className:"jsx-4b22437fb54054bc",children:e.tableNumber?`🪑 طاولة ${e.tableNumber}`:`🚪 غرفة ${e.roomNumber}`})]}),(0,t.jsx)("div",{style:{textAlign:"center"},className:"jsx-4b22437fb54054bc",children:(0,t.jsx)("span",{style:{fontSize:"13px",fontWeight:600,color:"#475569"},className:"jsx-4b22437fb54054bc",children:e.itemsCount||e.items?.length||0})}),(0,t.jsxs)("div",{style:{textAlign:"center"},className:"jsx-4b22437fb54054bc",children:[(0,t.jsx)("span",{style:{fontSize:"13px",fontWeight:700,color:"#0f172a"},className:"jsx-4b22437fb54054bc",children:e.total.toFixed(3)}),(0,t.jsx)("span",{style:{fontSize:"11px",color:"#94a3b8",marginRight:"4px"},className:"jsx-4b22437fb54054bc",children:"ر.ع"})]}),(0,t.jsx)("div",{style:{textAlign:"center"},className:"jsx-4b22437fb54054bc",children:(0,t.jsx)("span",{style:{display:"inline-flex",padding:"4px 10px",borderRadius:"6px",fontSize:"11px",fontWeight:600,backgroundColor:a.bg,color:a.color},className:"jsx-4b22437fb54054bc",children:a.label})}),(0,t.jsx)("div",{style:{textAlign:"center"},className:"jsx-4b22437fb54054bc",children:(0,t.jsx)("span",{style:{display:"inline-flex",padding:"4px 10px",borderRadius:"6px",fontSize:"11px",fontWeight:600,backgroundColor:r.bg,color:r.color},className:"jsx-4b22437fb54054bc",children:r.label})}),(0,t.jsx)("div",{style:{textAlign:"center"},className:"jsx-4b22437fb54054bc",children:(0,t.jsx)("span",{style:{fontSize:"12px",color:"#64748b"},className:"jsx-4b22437fb54054bc",children:(e=>{switch(e){case"staff-menu":return"الموظفين";case"cashier":return"الكاشير";case"mobile":return"الجوال";default:return e||"-"}})(e.source)})}),(0,t.jsx)("div",{style:{textAlign:"center"},onClick:e=>e.stopPropagation(),className:"jsx-4b22437fb54054bc",children:(0,t.jsx)("button",{onClick:()=>u(e),style:{padding:"8px",backgroundColor:"#f1f5f9",border:"none",borderRadius:"8px",cursor:"pointer",color:"#475569"},className:"jsx-4b22437fb54054bc",children:(0,t.jsx)(h.Eye,{style:{width:"16px",height:"16px"}})})})]},e.id)}),A>1&&(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",borderTop:"1px solid #e2e8f0",backgroundColor:"#f8fafc"},className:"jsx-4b22437fb54054bc",children:[(0,t.jsxs)("span",{style:{fontSize:"13px",color:"#64748b"},className:"jsx-4b22437fb54054bc",children:["عرض ",(f-1)*15+1," - ",Math.min(15*f,z.length)," من ",z.length]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"8px"},className:"jsx-4b22437fb54054bc",children:[(0,t.jsx)("button",{onClick:()=>b(e=>Math.max(1,e-1)),disabled:1===f,style:{display:"flex",alignItems:"center",justifyContent:"center",width:"36px",height:"36px",backgroundColor:1===f?"#f1f5f9":"#ffffff",border:"1px solid #e2e8f0",borderRadius:"8px",cursor:1===f?"not-allowed":"pointer",color:1===f?"#cbd5e1":"#475569"},className:"jsx-4b22437fb54054bc",children:(0,t.jsx)(g.ChevronRight,{style:{width:"18px",height:"18px"}})}),Array.from({length:Math.min(5,A)},(e,r)=>{let a;return a=A<=5||f<=3?r+1:f>=A-2?A-4+r:f-2+r,(0,t.jsx)("button",{onClick:()=>b(a),style:{width:"36px",height:"36px",backgroundColor:f===a?"#6366f1":"#ffffff",border:"1px solid "+(f===a?"#6366f1":"#e2e8f0"),borderRadius:"8px",cursor:"pointer",color:f===a?"#ffffff":"#475569",fontSize:"13px",fontWeight:600},className:"jsx-4b22437fb54054bc",children:a},a)}),(0,t.jsx)("button",{onClick:()=>b(e=>Math.min(A,e+1)),disabled:f===A,style:{display:"flex",alignItems:"center",justifyContent:"center",width:"36px",height:"36px",backgroundColor:f===A?"#f1f5f9":"#ffffff",border:"1px solid #e2e8f0",borderRadius:"8px",cursor:f===A?"not-allowed":"pointer",color:f===A?"#cbd5e1":"#475569"},className:"jsx-4b22437fb54054bc",children:(0,t.jsx)(y.ChevronLeft,{style:{width:"18px",height:"18px"}})})]})]})]})}),p&&(0,t.jsx)(m.default,{order:p,onClose:()=>u(null),onUpdateStatus:T}),(0,t.jsx)(r.default,{id:"4b22437fb54054bc",children:"@keyframes spin{to{transform:rotate(360deg)}}"})]})}e.s(["default",()=>k],76664)}]);